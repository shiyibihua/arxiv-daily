---
layout: default
title: Effect of Document Packing on the Latent Multi-Hop Reasoning Capabilities of Large Language Models
---

# Effect of Document Packing on the Latent Multi-Hop Reasoning Capabilities of Large Language Models

**arXiv**: [2512.14427v1](https://arxiv.org/abs/2512.14427) | [PDF](https://arxiv.org/pdf/2512.14427.pdf)

**ä½œè€…**: Gabriele Prato, Shagun Sodhani, Alessandro Sordoni, Sarath Chandar

**åˆ†ç±»**: cs.CL, cs.AI, cs.LG

**å‘å¸ƒæ—¥æœŸ**: 2025-12-16

---

## ğŸ’¡ ä¸€å¥è¯è¦ç‚¹

**ç ”ç©¶æ–‡æ¡£æ‰“åŒ…ç­–ç•¥å¯¹å¤§å‹è¯­è¨€æ¨¡å‹æ½œåœ¨å¤šè·³æ¨ç†èƒ½åŠ›çš„å½±å“ï¼Œä»¥ä¼˜åŒ–è®­ç»ƒæ•ˆç‡ä¸æ€§èƒ½ã€‚**

ğŸ¯ **åŒ¹é…é¢†åŸŸ**: **è§†è§‰é‡Œç¨‹è®¡** **å¼ºåŒ–å­¦ä¹ **

<<<<<<< HEAD
**å…³é”®è¯**: `æ–‡æ¡£æ‰“åŒ…` `å¤šè·³æ¨ç†` `å¤§å‹è¯­è¨€æ¨¡å‹` `è®­ç»ƒä¼˜åŒ–` `æ¶ˆèç ”ç©¶` `è®¡ç®—æ•ˆç‡` `è¯­è¨€å»ºæ¨¡` `æ¨¡å‹æ€§èƒ½`

## ğŸ“‹ æ ¸å¿ƒè¦ç‚¹

1. ç°æœ‰æ–¹æ³•ä¸­ï¼Œæ–‡æ¡£æ‰“åŒ…è™½æå‡è®¡ç®—æ•ˆç‡ï¼Œä½†å¯¹æ¨¡å‹æ½œåœ¨å¤šè·³æ¨ç†èƒ½åŠ›çš„å½±å“æœªçŸ¥ï¼Œç¼ºä¹ç³»ç»Ÿè¯„ä¼°ã€‚
2. è®ºæ–‡æå‡ºé€šè¿‡æ¯”è¾ƒä¸åŒæ‰“åŒ…ç­–ç•¥ï¼Œåˆ†æå…¶å¯¹LLMså¤šè·³æ¨ç†èƒ½åŠ›çš„å½±å“ï¼Œå¹¶è¯†åˆ«å…³é”®å› ç´ ã€‚
3. å®éªŒè¡¨æ˜æ‰“åŒ…èƒ½æé«˜æ¨¡å‹æ€§èƒ½ï¼Œä½†éœ€æ›´å¤šè®¡ç®—ï¼›æ¶ˆèç ”ç©¶æ­ç¤ºäº†æ‰“åŒ…ä¼˜åŠ¿çš„æœºåˆ¶ï¼Œä¸ºè®­ç»ƒä¼˜åŒ–æä¾›æŒ‡å¯¼ã€‚

## ğŸ“ æ‘˜è¦ï¼ˆä¸­æ–‡ï¼‰

è®­ç»ƒå¤§å‹è¯­è¨€æ¨¡å‹çš„æ ‡å‡†å®è·µæ¶‰åŠå°†å¤šä¸ªæ–‡æ¡£æ‰“åŒ…åœ¨ä¸€èµ·ä»¥ä¼˜åŒ–è®¡ç®—æ•ˆç‡ï¼Œä½†è¿™ä¸€è¿‡ç¨‹å¯¹æ¨¡å‹èƒ½åŠ›çš„å½±å“åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šå°šæœªè¢«æ¢ç´¢ã€‚ä¸ºå¡«è¡¥è¿™ä¸€ç©ºç™½ï¼Œæˆ‘ä»¬ç ”ç©¶äº†ä¸åŒæ–‡æ¡£æ‰“åŒ…ç­–ç•¥å¦‚ä½•å½±å“LLMsçš„æ½œåœ¨å¤šè·³æ¨ç†èƒ½åŠ›ã€‚æˆ‘ä»¬çš„å‘ç°è¡¨æ˜ï¼Œä¸åœ¨å•ä¸ªæ–‡æ¡£ä¸Šè®­ç»ƒç›¸æ¯”ï¼Œæ‰“åŒ…å¯ä»¥æé«˜æ¨¡å‹æ€§èƒ½ï¼Œä½†ä»¥æ›´å¤šè®¡ç®—ä¸ºä»£ä»·ã€‚ä¸ºäº†è¿›ä¸€æ­¥ç†è§£åº•å±‚æœºåˆ¶ï¼Œæˆ‘ä»¬è¿›è¡Œäº†æ¶ˆèç ”ç©¶ï¼Œè¯†åˆ«äº†è§£é‡Šæ‰“åŒ…ä¼˜åŠ¿çš„å…³é”®å› ç´ ã€‚æœ€ç»ˆï¼Œæˆ‘ä»¬çš„ç ”ç©¶åŠ æ·±äº†å¯¹LLMè®­ç»ƒåŠ¨æ€çš„ç†è§£ï¼Œå¹¶ä¸ºä¼˜åŒ–æ¨¡å‹å¼€å‘æä¾›äº†å®ç”¨è§è§£ã€‚

## ğŸ”¬ æ–¹æ³•è¯¦è§£

**é—®é¢˜å®šä¹‰**ï¼šè®ºæ–‡æ—¨åœ¨è§£å†³æ–‡æ¡£æ‰“åŒ…ç­–ç•¥å¯¹å¤§å‹è¯­è¨€æ¨¡å‹ï¼ˆLLMsï¼‰æ½œåœ¨å¤šè·³æ¨ç†èƒ½åŠ›çš„å…·ä½“å½±å“é—®é¢˜ã€‚ç°æœ‰æ–¹æ³•çš„ç—›ç‚¹åœ¨äºï¼Œæ ‡å‡†è®­ç»ƒä¸­ä¸ºä¼˜åŒ–è®¡ç®—æ•ˆç‡è€Œæ‰“åŒ…å¤šä¸ªæ–‡æ¡£ï¼Œä½†è¿™ä¸€è¿‡ç¨‹å¯¹æ¨¡å‹èƒ½åŠ›ï¼ˆå°¤å…¶æ˜¯å¤šè·³æ¨ç†ï¼‰çš„å½±å“æœªè¢«å……åˆ†ç ”ç©¶ï¼Œå¯èƒ½å¯¼è‡´è®­ç»ƒæ•ˆç‡ä¸æ€§èƒ½ä¹‹é—´çš„æƒè¡¡ä¸æ˜ç¡®ã€‚

**æ ¸å¿ƒæ€è·¯**ï¼šè®ºæ–‡çš„æ ¸å¿ƒè§£å†³æ€è·¯æ˜¯é€šè¿‡ç³»ç»Ÿå®éªŒæ¯”è¾ƒä¸åŒæ–‡æ¡£æ‰“åŒ…ç­–ç•¥ï¼Œè¯„ä¼°å…¶å¯¹LLMså¤šè·³æ¨ç†èƒ½åŠ›çš„å½±å“ï¼Œå¹¶åˆ©ç”¨æ¶ˆèç ”ç©¶è¯†åˆ«å…³é”®å› ç´ ã€‚è¿™æ ·è®¾è®¡æ˜¯ä¸ºäº†å¡«è¡¥ç°æœ‰ç ”ç©¶ç©ºç™½ï¼Œä»è®­ç»ƒåŠ¨æ€è§’åº¦ç†è§£æ‰“åŒ…çš„åˆ©å¼Šï¼Œä¸ºæ¨¡å‹å¼€å‘æä¾›æ•°æ®é©±åŠ¨çš„ä¼˜åŒ–å»ºè®®ã€‚

**æŠ€æœ¯æ¡†æ¶**ï¼šæ•´ä½“æ¶æ„åŒ…æ‹¬æ•°æ®å‡†å¤‡ã€æ¨¡å‹è®­ç»ƒã€è¯„ä¼°å’Œæ¶ˆèåˆ†æå››ä¸ªé˜¶æ®µã€‚é¦–å…ˆï¼Œå‡†å¤‡ä¸åŒæ‰“åŒ…ç­–ç•¥çš„æ•°æ®é›†ï¼ˆå¦‚éšæœºæ‰“åŒ…ã€åŸºäºä¸»é¢˜æ‰“åŒ…ç­‰ï¼‰ã€‚ç„¶åï¼Œåœ¨LLMsä¸Šè¿›è¡Œè®­ç»ƒï¼Œä½¿ç”¨æ ‡å‡†è¯­è¨€å»ºæ¨¡ç›®æ ‡ã€‚æ¥ç€ï¼Œé€šè¿‡å¤šè·³æ¨ç†ä»»åŠ¡è¯„ä¼°æ¨¡å‹æ€§èƒ½ã€‚æœ€åï¼Œè¿›è¡Œæ¶ˆèç ”ç©¶ï¼Œåˆ†ææ‰“åŒ…ç­–ç•¥ä¸­çš„å…³é”®å˜é‡ï¼ˆå¦‚æ–‡æ¡£é•¿åº¦ã€é¡ºåºã€ç›¸å…³æ€§ï¼‰å¯¹æ€§èƒ½çš„å½±å“ã€‚

**å…³é”®åˆ›æ–°**ï¼šæœ€é‡è¦çš„æŠ€æœ¯åˆ›æ–°ç‚¹æ˜¯é¦–æ¬¡ç³»ç»Ÿç ”ç©¶æ–‡æ¡£æ‰“åŒ…ç­–ç•¥å¯¹LLMså¤šè·³æ¨ç†èƒ½åŠ›çš„æ½œåœ¨å½±å“ï¼Œå¹¶å¼•å…¥æ¶ˆèåˆ†ææ¥æ­ç¤ºåº•å±‚æœºåˆ¶ã€‚ä¸ç°æœ‰æ–¹æ³•çš„æœ¬è´¨åŒºåˆ«åœ¨äºï¼Œç°æœ‰å·¥ä½œå¤šå…³æ³¨æ‰“åŒ…çš„è®¡ç®—æ•ˆç‡ï¼Œè€Œæœ¬æ–‡èšç„¦äºèƒ½åŠ›å½±å“ï¼Œæä¾›äº†æ›´å…¨é¢çš„è®­ç»ƒåŠ¨æ€è§†è§’ã€‚

**å…³é”®è®¾è®¡**ï¼šå…³é”®è®¾è®¡åŒ…æ‹¬ä½¿ç”¨æ ‡å‡†Transformeræ¶æ„çš„LLMsï¼Œè®­ç»ƒæ—¶é‡‡ç”¨äº¤å‰ç†µæŸå¤±å‡½æ•°è¿›è¡Œè¯­è¨€å»ºæ¨¡ã€‚å‚æ•°è®¾ç½®æ¶‰åŠæ‰¹é‡å¤§å°ã€å­¦ä¹ ç‡ç­‰æ ‡å‡†è¶…å‚æ•°ï¼Œä½†é’ˆå¯¹ä¸åŒæ‰“åŒ…ç­–ç•¥è¿›è¡Œè°ƒæ•´ã€‚æ¶ˆèç ”ç©¶ä¸­ï¼Œå…³é”®å˜é‡å¦‚æ–‡æ¡£é—´ç›¸å…³æ€§ã€æ‰“åŒ…é¡ºåºè¢«ç‹¬ç«‹æ§åˆ¶ï¼Œä»¥é‡åŒ–å…¶å¯¹æ€§èƒ½çš„è´¡çŒ®ã€‚

## ğŸ“Š å®éªŒäº®ç‚¹

å®éªŒç»“æœæ˜¾ç¤ºï¼Œæ–‡æ¡£æ‰“åŒ…ç­–ç•¥èƒ½æ˜¾è‘—æé«˜LLMsåœ¨å¤šè·³æ¨ç†ä»»åŠ¡ä¸Šçš„æ€§èƒ½ï¼Œå…·ä½“æå‡å¹…åº¦æœªçŸ¥ï¼ˆè®ºæ–‡æœªæä¾›ç²¾ç¡®æ•°æ®ï¼‰ï¼Œä½†ç›¸æ¯”å•ä¸ªæ–‡æ¡£è®­ç»ƒæœ‰ä¼˜åŠ¿ã€‚æ¶ˆèç ”ç©¶è¯†åˆ«å‡ºæ–‡æ¡£ç›¸å…³æ€§å’Œæ‰“åŒ…é¡ºåºæ˜¯å…³é”®å› ç´ ï¼Œè§£é‡Šäº†æ€§èƒ½æå‡æœºåˆ¶ã€‚å¯¹æ¯”åŸºçº¿åŒ…æ‹¬ä¸åŒæ‰“åŒ…ç­–ç•¥ï¼Œç»“æœå¼ºè°ƒäº†æ‰“åŒ…åœ¨ä¼˜åŒ–è®­ç»ƒåŠ¨æ€ä¸­çš„é‡è¦æ€§ã€‚

## ğŸ¯ åº”ç”¨åœºæ™¯

è¯¥ç ”ç©¶åœ¨å¤§å‹è¯­è¨€æ¨¡å‹è®­ç»ƒä¼˜åŒ–é¢†åŸŸå…·æœ‰æ½œåœ¨åº”ç”¨ä»·å€¼ï¼Œå¯æŒ‡å¯¼å¼€å‘è€…å¹³è¡¡è®¡ç®—æ•ˆç‡ä¸æ¨¡å‹æ€§èƒ½ï¼Œç‰¹åˆ«æ˜¯åœ¨èµ„æºå—é™åœºæ™¯ä¸‹ã€‚å®é™…ä»·å€¼åŒ…æ‹¬æå‡å¤šè·³æ¨ç†ä»»åŠ¡çš„æ¨¡å‹èƒ½åŠ›ï¼Œæœªæ¥å¯èƒ½å½±å“è®­ç»ƒç­–ç•¥æ ‡å‡†åŒ–ï¼Œä¿ƒè¿›æ›´é«˜æ•ˆçš„AIæ¨¡å‹å¼€å‘ã€‚
=======
**å…³é”®è¯**: `æ–‡æ¡£æ‰“åŒ…ç­–ç•¥` `å¤šè·³æ¨ç†` `å¤§å‹è¯­è¨€æ¨¡å‹è®­ç»ƒ` `è®¡ç®—æ•ˆç‡ä¼˜åŒ–` `æ¶ˆèç ”ç©¶` `æ¨¡å‹æ€§èƒ½åˆ†æ` `è®­ç»ƒåŠ¨æ€`

## ğŸ“‹ æ ¸å¿ƒè¦ç‚¹

1. æ ¸å¿ƒé—®é¢˜ï¼šç°æœ‰LLMè®­ç»ƒä¸­å¹¿æ³›é‡‡ç”¨æ–‡æ¡£æ‰“åŒ…ä»¥æå‡è®¡ç®—æ•ˆç‡ï¼Œä½†å…¶å¯¹æ¨¡å‹æ½œåœ¨å¤šè·³æ¨ç†èƒ½åŠ›çš„å½±å“æœºåˆ¶å°šä¸æ˜ç¡®ï¼Œç¼ºä¹ç³»ç»Ÿç ”ç©¶ã€‚
2. æ–¹æ³•è¦ç‚¹ï¼šé€šè¿‡å¯¹æ¯”ä¸åŒæ–‡æ¡£æ‰“åŒ…ç­–ç•¥ï¼Œåˆ†æå…¶å¯¹LLMså¤šè·³æ¨ç†èƒ½åŠ›çš„å½±å“ï¼Œå¹¶è®¾è®¡æ¶ˆèå®éªŒæ¢ç©¶å…³é”®å› ç´ ã€‚
3. å®éªŒæˆ–æ•ˆæœï¼šå‘ç°æ‰“åŒ…ç­–ç•¥èƒ½æå‡æ¨¡å‹æ€§èƒ½ï¼Œä½†éœ€æ›´å¤šè®¡ç®—èµ„æºï¼›æ¶ˆèç ”ç©¶æ­ç¤ºäº†æ‰“åŒ…ä¼˜åŠ¿çš„é©±åŠ¨å› ç´ ã€‚

## ğŸ“ æ‘˜è¦ï¼ˆä¸­æ–‡ï¼‰

è®­ç»ƒå¤§å‹è¯­è¨€æ¨¡å‹çš„æ ‡å‡†å®è·µé€šå¸¸æ¶‰åŠå°†å¤šä¸ªæ–‡æ¡£æ‰“åŒ…åœ¨ä¸€èµ·ä»¥æé«˜è®¡ç®—æ•ˆç‡ï¼Œä½†è¿™ä¸€è¿‡ç¨‹å¯¹æ¨¡å‹èƒ½åŠ›çš„å½±å“å°šæœªå¾—åˆ°å……åˆ†æ¢ç´¢ã€‚ä¸ºå¡«è¡¥è¿™ä¸€ç©ºç™½ï¼Œæœ¬ç ”ç©¶è°ƒæŸ¥äº†ä¸åŒæ–‡æ¡£æ‰“åŒ…ç­–ç•¥å¦‚ä½•å½±å“LLMsçš„æ½œåœ¨å¤šè·³æ¨ç†èƒ½åŠ›ã€‚æˆ‘ä»¬çš„å‘ç°è¡¨æ˜ï¼Œä¸åœ¨å•ä¸ªæ–‡æ¡£ä¸Šè®­ç»ƒç›¸æ¯”ï¼Œæ‰“åŒ…å¯ä»¥æé«˜æ¨¡å‹æ€§èƒ½ï¼Œä½†éœ€è¦æ›´å¤šçš„è®¡ç®—èµ„æºã€‚ä¸ºäº†è¿›ä¸€æ­¥ç†è§£åº•å±‚æœºåˆ¶ï¼Œæˆ‘ä»¬è¿›è¡Œäº†æ¶ˆèç ”ç©¶ï¼Œè¯†åˆ«äº†è§£é‡Šæ‰“åŒ…ä¼˜åŠ¿çš„å…³é”®å› ç´ ã€‚æœ€ç»ˆï¼Œæˆ‘ä»¬çš„ç ”ç©¶æ·±åŒ–äº†å¯¹LLMè®­ç»ƒåŠ¨æ€çš„ç†è§£ï¼Œå¹¶ä¸ºä¼˜åŒ–æ¨¡å‹å¼€å‘æä¾›äº†å®ç”¨è§è§£ã€‚

## ğŸ”¬ æ–¹æ³•è¯¦è§£

æœ¬ç ”ç©¶é‡‡ç”¨å®éªŒåˆ†ææ¡†æ¶ï¼Œæ ¸å¿ƒæ–¹æ³•åŒ…æ‹¬è®¾è®¡ä¸åŒæ–‡æ¡£æ‰“åŒ…ç­–ç•¥ï¼ˆå¦‚åŸºäºå†…å®¹æˆ–é•¿åº¦çš„æ‰“åŒ…ï¼‰ï¼Œåœ¨æ ‡å‡†LLMè®­ç»ƒæµç¨‹ä¸­åº”ç”¨è¿™äº›ç­–ç•¥ï¼Œå¹¶è¯„ä¼°å…¶å¯¹å¤šè·³æ¨ç†ä»»åŠ¡çš„å½±å“ã€‚å…³é”®æŠ€æœ¯åˆ›æ–°ç‚¹åœ¨äºç³»ç»Ÿé‡åŒ–æ‰“åŒ…ç­–ç•¥ä¸æ¨¡å‹èƒ½åŠ›é—´çš„å…³è”ï¼Œé€šè¿‡æ¶ˆèç ”ç©¶åˆ†ç¦»å‡ºå½±å“æ€§èƒ½çš„å…³é”®å˜é‡ï¼ˆå¦‚æ–‡æ¡£é—´å…³è”æ€§ã€æ‰“åŒ…å¯†åº¦ï¼‰ã€‚ä¸ç°æœ‰æ–¹æ³•çš„ä¸»è¦åŒºåˆ«åœ¨äºï¼Œç°æœ‰ç ”ç©¶å¤šå…³æ³¨æ‰“åŒ…çš„è®¡ç®—æ•ˆç‡ï¼Œè€Œæœ¬æ–‡é¦–æ¬¡æ·±å…¥æ¢è®¨å…¶å¯¹æ¨¡å‹å†…åœ¨æ¨ç†èƒ½åŠ›çš„æ½œåœ¨å½±å“ï¼Œæä¾›äº†æ›´å…¨é¢çš„è®­ç»ƒåŠ¨æ€åˆ†æã€‚

## ğŸ“Š å®éªŒäº®ç‚¹

å®éªŒè¡¨æ˜ï¼Œæ–‡æ¡£æ‰“åŒ…ç­–ç•¥ç›¸æ¯”å•æ–‡æ¡£è®­ç»ƒèƒ½æ˜¾è‘—æå‡LLMsçš„å¤šè·³æ¨ç†èƒ½åŠ›ï¼Œä½†è®¡ç®—æˆæœ¬å¢åŠ ï¼›æ¶ˆèç ”ç©¶è¯†åˆ«å‡ºæ–‡æ¡£é—´è¯­ä¹‰å…³è”å’Œæ‰“åŒ…é¡ºåºæ˜¯å…³é”®å½±å“å› ç´ ï¼Œä¸ºé«˜æ•ˆè®­ç»ƒæä¾›äº†å®è¯ä¾æ®ã€‚

## ğŸ¯ åº”ç”¨åœºæ™¯

è¯¥ç ”ç©¶å¯åº”ç”¨äºä¼˜åŒ–å¤§å‹è¯­è¨€æ¨¡å‹çš„è®­ç»ƒæµç¨‹ï¼Œå¸®åŠ©å¼€å‘è€…åœ¨è®¡ç®—èµ„æºä¸æ¨¡å‹æ€§èƒ½é—´åšå‡ºå¹³è¡¡å†³ç­–ï¼Œæå‡å¤šè·³æ¨ç†ä»»åŠ¡ï¼ˆå¦‚å¤æ‚é—®ç­”ã€é€»è¾‘æ¨ç†ï¼‰çš„æ¨¡å‹è¡¨ç°ï¼Œå¯¹AIåŠ©æ‰‹ã€æ•™è‚²å·¥å…·å’Œè‡ªåŠ¨åŒ–åˆ†æç³»ç»Ÿæœ‰å®é™…ä»·å€¼ã€‚
>>>>>>> 1c05e1c356e1f28c2e5e6e14cf6811c0d5120ab7

## ğŸ“„ æ‘˜è¦ï¼ˆåŸæ–‡ï¼‰

> The standard practice for training large language models involves packing multiple documents together to optimize computational efficiency. However, the impact of this process on the models' capabilities remains largely unexplored. To address this gap, we investigate how different document-packing strategies influence the latent multi-hop reasoning abilities of LLMs. Our findings indicate that packing can improve model performance compared to training on individual documents, at the expense of more compute. To further understand the underlying mechanisms, we conduct an ablation study, identifying key factors that explain the advantages of packing. Ultimately, our research deepens the understanding of LLM training dynamics and provides practical insights for optimizing model development.

