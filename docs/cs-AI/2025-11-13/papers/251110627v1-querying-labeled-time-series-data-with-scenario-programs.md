---
layout: default
title: Querying Labeled Time Series Data with Scenario Programs
---

# Querying Labeled Time Series Data with Scenario Programs

<div class="paper-toolbar">
  <a href="https://arxiv.org/abs/2511.10627" class="toolbar-btn" target="_blank">ğŸ“„ arXiv: 2511.10627v1</a>
  <a href="https://arxiv.org/pdf/2511.10627.pdf" class="toolbar-btn" target="_blank">ğŸ“¥ PDF</a>
  <button class="toolbar-btn favorite-btn" data-arxiv-id="2511.10627v1" onclick="toggleFavorite(this, '2511.10627v1', 'Querying Labeled Time Series Data with Scenario Programs')" title="æ·»åŠ åˆ°æ”¶è—å¤¹">â˜† æ”¶è—</button>
  <button class="toolbar-btn" onclick="copyLinkToClipboard(this)">ğŸ”— åˆ†äº«</button>
</div>


**ä½œè€…**: Edward Kim, Devan Shanker, Varun Bharadwaj, Hongbeen Park, Jinkyu Kim, Hazem Torfah, Daniel J Fremont, Sanjit A Seshia

**åˆ†ç±»**: cs.AI, cs.CV, cs.FL, cs.LG

**å‘å¸ƒæ—¥æœŸ**: 2025-11-13

**æœŸåˆŠ**: NASA Formal Methods Conference 2025

**DOI**: [10.1007/978-3-031-93706-4_12](https://doi.org/10.1007/978-3-031-93706-4_12)

---

## ğŸ’¡ ä¸€å¥è¯è¦ç‚¹

**æå‡ºåŸºäºåœºæ™¯ç¨‹åºçš„æ—¶åºæ•°æ®æŸ¥è¯¢æ–¹æ³•ï¼Œç”¨äºéªŒè¯ä»¿çœŸç¯å¢ƒä¸­è‡ªåŠ¨é©¾é©¶ç³»ç»Ÿçš„å¤±æ•ˆåœºæ™¯ã€‚**

ğŸ¯ **åŒ¹é…é¢†åŸŸ**: **æ”¯æŸ±ä¸€ï¼šæœºå™¨äººæ§åˆ¶ (Robot Control)**

**å…³é”®è¯**: `è‡ªåŠ¨é©¾é©¶` `åœºæ™¯ç¨‹åº` `æ—¶åºæ•°æ®æŸ¥è¯¢` `ä»¿çœŸéªŒè¯` `å¤±æ•ˆåœºæ™¯`

## ğŸ“‹ æ ¸å¿ƒè¦ç‚¹

1. ç°æœ‰æ–¹æ³•éš¾ä»¥éªŒè¯ä»¿çœŸç¯å¢ƒä¸­å‘ç°çš„è‡ªåŠ¨é©¾é©¶å¤±æ•ˆåœºæ™¯åœ¨çœŸå®ä¸–ç•Œä¸­çš„å¯å¤ç°æ€§ï¼Œå­˜åœ¨sim-to-realçš„å·®è·ã€‚
2. æå‡ºä¸€ç§åŸºäºScenicåœºæ™¯ç¨‹åºçš„æ—¶åºæ•°æ®æŸ¥è¯¢æ–¹æ³•ï¼Œç”¨äºåœ¨çœŸå®ä¸–ç•Œæ•°æ®é›†ä¸­å®šä½å’ŒéªŒè¯æ¨¡æ‹Ÿå¤±æ•ˆåœºæ™¯ã€‚
3. å®éªŒç»“æœè¡¨æ˜ï¼Œè¯¥ç®—æ³•åœ¨æŸ¥è¯¢æ•ˆç‡å’Œå‡†ç¡®æ€§ä¸Šä¼˜äºç°æœ‰å•†ä¸šè§†è§‰å¤§è¯­è¨€æ¨¡å‹ï¼Œå¹¶å…·æœ‰è‰¯å¥½çš„å¯æ‰©å±•æ€§ã€‚

## ğŸ“ æ‘˜è¦ï¼ˆä¸­æ–‡ï¼‰

åŸºäºä»¿çœŸçš„æµ‹è¯•å·²æˆä¸ºç¡®ä¿ç½‘ç»œç‰©ç†ç³»ç»Ÿï¼ˆCPSï¼‰å®‰å…¨çš„å…³é”®è¡¥å……æ‰‹æ®µã€‚å› æ­¤ï¼Œå¤§é‡çš„ç ”ç©¶å·¥ä½œè‡´åŠ›äºè¯†åˆ«ä»¿çœŸç¯å¢ƒä¸­çš„å¤±æ•ˆåœºæ™¯ã€‚ç„¶è€Œï¼Œä¸€ä¸ªå…³é”®é—®é¢˜ä»ç„¶å­˜åœ¨ï¼šåœ¨ä»¿çœŸä¸­å‘ç°çš„è‡ªåŠ¨é©¾é©¶ï¼ˆAVï¼‰å¤±æ•ˆåœºæ™¯æ˜¯å¦å¯ä»¥åœ¨çœŸå®ä¸–ç•Œçš„å®é™…ç³»ç»Ÿä¸­é‡ç°ï¼Ÿæ¨¡æ‹Ÿå’ŒçœŸå®ä¼ æ„Ÿå™¨æ•°æ®ä¹‹é—´çš„å·®å¼‚å¯¼è‡´çš„sim-to-realå·®è·æ„å‘³ç€ï¼Œåœ¨ä»¿çœŸä¸­è¯†åˆ«å‡ºçš„å¤±æ•ˆåœºæ™¯å¯èƒ½æ˜¯åˆæˆä¼ æ„Ÿå™¨æ•°æ®çš„äººä¸ºäº§ç‰©ï¼Œä¹Ÿå¯èƒ½æ˜¯çœŸå®ä¼ æ„Ÿå™¨æ•°æ®ä¸­å®é™…å­˜åœ¨çš„é—®é¢˜ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒéªŒè¯æ¨¡æ‹Ÿå¤±æ•ˆåœºæ™¯çš„æœ‰æ•ˆæ–¹æ³•æ˜¯åœ¨çœŸå®ä¸–ç•Œæ•°æ®é›†ä¸­æ‰¾åˆ°è¿™äº›åœºæ™¯çš„å‘ç”Ÿï¼Œå¹¶éªŒè¯å¤±æ•ˆæ˜¯å¦åœ¨æ•°æ®é›†ä¸ŠæŒç»­å­˜åœ¨ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬æ­£å¼å®šä¹‰äº†æ ‡è®°çš„æ—¶åºä¼ æ„Ÿå™¨æ•°æ®å¦‚ä½•ä¸æŠ½è±¡åœºæ™¯åŒ¹é…ï¼Œè¯¥åœºæ™¯ä½¿ç”¨Scenicæ¦‚ç‡ç¼–ç¨‹è¯­è¨€è¡¨ç¤ºä¸ºåœºæ™¯ç¨‹åºã€‚æˆ‘ä»¬æå‡ºäº†ä¸€ç§æŸ¥è¯¢ç®—æ³•ï¼Œè¯¥ç®—æ³•åœ¨ç»™å®šåœºæ™¯ç¨‹åºå’Œæ ‡è®°æ•°æ®é›†çš„æƒ…å†µä¸‹ï¼Œè¯†åˆ«ä¸æŒ‡å®šåœºæ™¯åŒ¹é…çš„æ•°æ®å­é›†ã€‚å®éªŒè¡¨æ˜ï¼Œæˆ‘ä»¬çš„ç®—æ³•åœ¨æŸ¥è¯¢åœºæ™¯æ—¶æ¯”æœ€å…ˆè¿›çš„å•†ä¸šè§†è§‰å¤§è¯­è¨€æ¨¡å‹æ›´å‡†ç¡®ï¼Œé€Ÿåº¦å¿«å‡ ä¸ªæ•°é‡çº§ï¼Œå¹¶ä¸”å¯ä»¥éšç€æŸ¥è¯¢æ—¶åºæ•°æ®çš„æŒç»­æ—¶é—´è¿›è¡Œæ‰©å±•ã€‚

## ğŸ”¬ æ–¹æ³•è¯¦è§£

**é—®é¢˜å®šä¹‰**ï¼šè®ºæ–‡æ—¨åœ¨è§£å†³è‡ªåŠ¨é©¾é©¶ç³»ç»Ÿä»¿çœŸæµ‹è¯•ä¸­ï¼Œå¦‚ä½•éªŒè¯ä»¿çœŸç¯å¢ƒä¸­å‘ç°çš„å¤±æ•ˆåœºæ™¯åœ¨çœŸå®ä¸–ç•Œä¸­æ˜¯å¦çœŸå®å­˜åœ¨çš„é—®é¢˜ã€‚ç°æœ‰æ–¹æ³•ä¸»è¦ä¾èµ–äººå·¥åˆ†ææˆ–é€šç”¨è§†è§‰æ¨¡å‹ï¼Œæ•ˆç‡ä½ä¸‹ä¸”å‡†ç¡®æ€§ä¸è¶³ï¼Œéš¾ä»¥æœ‰æ•ˆå¼¥åˆsim-to-realçš„å·®è·ã€‚

**æ ¸å¿ƒæ€è·¯**ï¼šè®ºæ–‡çš„æ ¸å¿ƒæ€è·¯æ˜¯å°†å¤±æ•ˆåœºæ™¯æŠ½è±¡ä¸ºScenicæ¦‚ç‡ç¼–ç¨‹è¯­è¨€æè¿°çš„åœºæ™¯ç¨‹åºï¼Œç„¶åè®¾è®¡ä¸€ç§é«˜æ•ˆçš„æŸ¥è¯¢ç®—æ³•ï¼Œåœ¨çœŸå®ä¸–ç•Œçš„æ ‡è®°æ—¶åºæ•°æ®ä¸­æœç´¢ä¸è¯¥åœºæ™¯ç¨‹åºåŒ¹é…çš„æ•°æ®ç‰‡æ®µã€‚é€šè¿‡éªŒè¯è¿™äº›æ•°æ®ç‰‡æ®µä¸Šæ˜¯å¦ä¹Ÿå‘ç”Ÿå¤±æ•ˆï¼Œä»è€ŒéªŒè¯ä»¿çœŸç»“æœçš„çœŸå®æ€§ã€‚

**æŠ€æœ¯æ¡†æ¶**ï¼šè¯¥æ–¹æ³•åŒ…å«ä¸¤ä¸ªä¸»è¦æ­¥éª¤ï¼š1) ä½¿ç”¨Scenicè¯­è¨€ç¼–å†™åœºæ™¯ç¨‹åºï¼Œæè¿°å¾…éªŒè¯çš„å¤±æ•ˆåœºæ™¯ï¼›2) è®¾è®¡æŸ¥è¯¢ç®—æ³•ï¼Œåœ¨æ ‡è®°çš„æ—¶åºæ•°æ®é›†ä¸­æœç´¢ä¸åœºæ™¯ç¨‹åºåŒ¹é…çš„æ•°æ®ç‰‡æ®µã€‚æŸ¥è¯¢ç®—æ³•çš„æ ¸å¿ƒæ˜¯é«˜æ•ˆåœ°è¯„ä¼°æ—¶åºæ•°æ®ä¸åœºæ™¯ç¨‹åºä¹‹é—´çš„åŒ¹é…ç¨‹åº¦ï¼Œå¹¶è¿”å›æ‰€æœ‰åŒ¹é…çš„æ•°æ®ç‰‡æ®µã€‚

**å…³é”®åˆ›æ–°**ï¼šè¯¥æ–¹æ³•æœ€é‡è¦çš„åˆ›æ–°åœ¨äºå°†æ¦‚ç‡ç¼–ç¨‹è¯­è¨€Scenicå¼•å…¥åˆ°è‡ªåŠ¨é©¾é©¶å¤±æ•ˆåœºæ™¯çš„éªŒè¯ä¸­ï¼Œåˆ©ç”¨Scenicçš„è¡¨è¾¾èƒ½åŠ›å°†å¤æ‚çš„åœºæ™¯æè¿°å½¢å¼åŒ–ï¼Œå¹¶è®¾è®¡äº†é«˜æ•ˆçš„æŸ¥è¯¢ç®—æ³•ã€‚ä¸ä¼ ç»Ÿçš„åŸºäºè§„åˆ™æˆ–æ¨¡æ¿åŒ¹é…çš„æ–¹æ³•ç›¸æ¯”ï¼Œè¯¥æ–¹æ³•æ›´åŠ çµæ´»å’Œé€šç”¨ï¼Œèƒ½å¤Ÿå¤„ç†æ›´å¤æ‚çš„åœºæ™¯ã€‚ä¸ç›´æ¥ä½¿ç”¨è§†è§‰å¤§æ¨¡å‹ç›¸æ¯”ï¼Œè¯¥æ–¹æ³•æ›´åŠ é«˜æ•ˆå’Œå‡†ç¡®ï¼Œé¿å…äº†è§†è§‰å¤§æ¨¡å‹åœ¨ç‰¹å®šä»»åŠ¡ä¸Šçš„æ³›åŒ–æ€§é—®é¢˜ã€‚

**å…³é”®è®¾è®¡**ï¼šScenicåœºæ™¯ç¨‹åºçš„è®¾è®¡éœ€è¦ä»”ç»†è€ƒè™‘åœºæ™¯çš„æŠ½è±¡ç¨‹åº¦å’Œå‚æ•°èŒƒå›´ï¼Œä»¥ä¿è¯æŸ¥è¯¢çš„å‡†ç¡®æ€§å’Œæ•ˆç‡ã€‚æŸ¥è¯¢ç®—æ³•çš„è®¾è®¡éœ€è¦è€ƒè™‘æ—¶åºæ•°æ®çš„ç‰¹ç‚¹ï¼Œä¾‹å¦‚æ—¶é—´åºåˆ—çš„é•¿åº¦ã€é‡‡æ ·é¢‘ç‡å’Œå™ªå£°æ°´å¹³ã€‚å…·ä½“çš„åŒ¹é…ç­–ç•¥å’Œé˜ˆå€¼è®¾ç½®éœ€è¦æ ¹æ®å…·ä½“çš„åº”ç”¨åœºæ™¯è¿›è¡Œè°ƒæ•´ã€‚

## ğŸ“Š å®éªŒäº®ç‚¹

å®éªŒç»“æœè¡¨æ˜ï¼Œè¯¥ç®—æ³•åœ¨æŸ¥è¯¢åœºæ™¯æ—¶æ¯”æœ€å…ˆè¿›çš„å•†ä¸šè§†è§‰å¤§è¯­è¨€æ¨¡å‹æ›´å‡†ç¡®ï¼Œé€Ÿåº¦å¿«å‡ ä¸ªæ•°é‡çº§ã€‚æ­¤å¤–ï¼Œè¯¥ç®—æ³•å…·æœ‰è‰¯å¥½çš„å¯æ‰©å±•æ€§ï¼Œå¯ä»¥éšç€æŸ¥è¯¢æ—¶åºæ•°æ®çš„æŒç»­æ—¶é—´è¿›è¡Œæ‰©å±•ï¼Œé€‚ç”¨äºå¤§è§„æ¨¡æ•°æ®é›†çš„åˆ†æã€‚

## ğŸ¯ åº”ç”¨åœºæ™¯

è¯¥ç ”ç©¶æˆæœå¯åº”ç”¨äºè‡ªåŠ¨é©¾é©¶ç³»ç»Ÿçš„æµ‹è¯•å’ŒéªŒè¯ï¼Œå¸®åŠ©å¼€å‘è€…å¿«é€Ÿå®šä½å’Œä¿®å¤çœŸå®ä¸–ç•Œä¸­å­˜åœ¨çš„å®‰å…¨éšæ‚£ã€‚æ­¤å¤–ï¼Œè¯¥æ–¹æ³•è¿˜å¯ä»¥æ‰©å±•åˆ°å…¶ä»–ç½‘ç»œç‰©ç†ç³»ç»Ÿé¢†åŸŸï¼Œä¾‹å¦‚æœºå™¨äººã€èˆªç©ºèˆªå¤©ç­‰ï¼Œç”¨äºéªŒè¯ä»¿çœŸæ¨¡å‹çš„å‡†ç¡®æ€§å’Œå¯é æ€§ï¼Œæé«˜ç³»ç»Ÿçš„å®‰å…¨æ€§å’Œç¨³å®šæ€§ã€‚

## ğŸ“„ æ‘˜è¦ï¼ˆåŸæ–‡ï¼‰

> Simulation-based testing has become a crucial complement to road testing for ensuring the safety of cyber physical systems (CPS). As a result, significant research efforts have been directed toward identifying failure scenarios within simulation environments. However, a critical question remains. Are the AV failure scenarios discovered in simulation reproducible on actual systems in the real world? The sim-to-real gap caused by differences between simulated and real sensor data means that failure scenarios identified in simulation might either be artifacts of synthetic sensor data or actual issues that also occur with real sensor data. To address this, an effective approach to validating simulated failure scenarios is to locate occurrences of these scenarios within real-world datasets and verify whether the failure persists on the datasets. To this end, we introduce a formal definition of how labeled time series sensor data can match an abstract scenario, represented as a scenario program using the Scenic probabilistic programming language. We present a querying algorithm that, given a scenario program and a labeled dataset, identifies the subset of data that matches the specified scenario. Our experiment shows that our algorithm is more accurate and orders of magnitude faster in querying scenarios than the state-of-the-art commercial vision large language models, and can scale with the duration of queried time series data.

