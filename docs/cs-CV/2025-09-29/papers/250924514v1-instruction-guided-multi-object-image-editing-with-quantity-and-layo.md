---
layout: default
title: Instruction Guided Multi Object Image Editing with Quantity and Layout Consistency
---

# Instruction Guided Multi Object Image Editing with Quantity and Layout Consistency

<div class="paper-toolbar">
  <a href="https://arxiv.org/abs/2509.24514" class="toolbar-btn" target="_blank">ğŸ“„ arXiv: 2509.24514v1</a>
  <a href="https://arxiv.org/pdf/2509.24514.pdf" class="toolbar-btn" target="_blank">ğŸ“¥ PDF</a>
  <button class="toolbar-btn favorite-btn" data-arxiv-id="2509.24514v1" data-paper-url="__CURRENT_PAGE__" onclick="toggleFavorite(this, '2509.24514v1', 'Instruction Guided Multi Object Image Editing with Quantity and Layout Consistency')" title="æ·»åŠ åˆ°æ”¶è—å¤¹">â˜† æ”¶è—</button>
  <button class="toolbar-btn" onclick="copyLinkToClipboard(this)">ğŸ”— åˆ†äº«</button>
</div>


**ä½œè€…**: Jiaqi Tan, Fangyu Li, Yang Liu

**åˆ†ç±»**: cs.CV

**å‘å¸ƒæ—¥æœŸ**: 2025-09-29

---

## ğŸ’¡ ä¸€å¥è¯è¦ç‚¹

**æå‡ºQL-Adapterï¼Œè§£å†³å¤šå¯¹è±¡å›¾åƒç¼–è¾‘ä¸­æ•°é‡å’Œå¸ƒå±€ä¸€è‡´æ€§é—®é¢˜**

ğŸ¯ **åŒ¹é…é¢†åŸŸ**: **æ”¯æŸ±ä¹ï¼šå…·èº«å¤§æ¨¡å‹ (Embodied Foundation Models)**

**å…³é”®è¯**: `å›¾åƒç¼–è¾‘` `å¤šå¯¹è±¡ç¼–è¾‘` `æŒ‡ä»¤é©±åŠ¨` `å¸ƒå±€ä¸€è‡´æ€§` `è·¨æ¨¡æ€èåˆ` `CLIP` `ç©ºé—´ç»“æ„ç†è§£`

## ğŸ“‹ æ ¸å¿ƒè¦ç‚¹

1. ç°æœ‰åŸºäºCLIPæ–‡æœ¬ç¼–ç å™¨çš„æŒ‡ä»¤é©±åŠ¨å›¾åƒç¼–è¾‘æ–¹æ³•åœ¨å¤æ‚å¤šå¯¹è±¡åœºæ™¯ä¸­è¡¨ç°ä¸ä½³ã€‚
2. QL-Adapteré€šè¿‡å›¾åƒ-å¸ƒå±€èåˆå’Œè·¨æ¨¡æ€å¢å¼ºï¼Œå¼ºåŒ–ç©ºé—´ç»“æ„ç†è§£å’ŒæŒ‡ä»¤éµå¾ªèƒ½åŠ›ã€‚
3. QL-Adapteråœ¨QL-EditåŸºå‡†ä¸Šå–å¾—äº†SOTAæ€§èƒ½ï¼Œæ˜¾è‘—ä¼˜äºç°æœ‰æ¨¡å‹ï¼ŒéªŒè¯äº†æœ‰æ•ˆæ€§ã€‚

## ğŸ“ æ‘˜è¦ï¼ˆä¸­æ–‡ï¼‰

æœ¬æ–‡æå‡ºQL-Adapterï¼Œä¸€ä¸ªç”¨äºå¤šå¯¹è±¡å›¾åƒç¼–è¾‘çš„æ¡†æ¶ï¼Œæ—¨åœ¨è§£å†³å¯¹è±¡è®¡æ•°å’Œç©ºé—´å¸ƒå±€çš„å¼ºåˆ¶æ‰§è¡Œä»¥åŠé€‚åº”å¤šæ ·åŒ–ç±»åˆ«è¿™ä¸¤å¤§æŒ‘æˆ˜ã€‚QL-Adapterç”±å›¾åƒ-å¸ƒå±€èåˆæ¨¡å—(ILFM)å’Œè·¨æ¨¡æ€å¢å¼ºæ¨¡å—(CMAM)ç»„æˆã€‚ILFMå°†å¸ƒå±€å…ˆéªŒä¸CLIPå›¾åƒç¼–ç å™¨çš„ViT patch tokensèåˆï¼Œä»¥å¢å¼ºç©ºé—´ç»“æ„ç†è§£ã€‚CMAMå°†å›¾åƒç‰¹å¾æ³¨å…¥åˆ°æ–‡æœ¬åˆ†æ”¯ä¸­ï¼Œä»¥ä¸°å¯Œæ–‡æœ¬åµŒå…¥å¹¶æ”¹è¿›æŒ‡ä»¤éµå¾ªã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬æ„å»ºäº†QL-Datasetï¼Œä¸€ä¸ªæ¶µç›–å¹¿æ³›ç±»åˆ«ã€å¸ƒå±€å’Œè®¡æ•°å˜åŒ–çš„åŸºå‡†ï¼Œå¹¶å®šä¹‰äº†æ•°é‡å’Œå¸ƒå±€ä¸€è‡´çš„å›¾åƒç¼–è¾‘ä»»åŠ¡(QL-Edit)ã€‚å¤§é‡å®éªŒè¡¨æ˜ï¼ŒQL-Adapteråœ¨QL-Editä¸Šå®ç°äº†æœ€å…ˆè¿›çš„æ€§èƒ½ï¼Œå¹¶æ˜¾è‘—ä¼˜äºç°æœ‰æ¨¡å‹ã€‚

## ğŸ”¬ æ–¹æ³•è¯¦è§£

**é—®é¢˜å®šä¹‰**ï¼šç°æœ‰æŒ‡ä»¤é©±åŠ¨çš„å›¾åƒç¼–è¾‘æ–¹æ³•ï¼Œç‰¹åˆ«æ˜¯åŸºäºCLIPçš„æ–¹æ¡ˆï¼Œåœ¨å¤„ç†åŒ…å«å¤šä¸ªå¯¹è±¡çš„å¤æ‚åœºæ™¯æ—¶ï¼Œéš¾ä»¥ä¿è¯ç¼–è¾‘åå›¾åƒä¸­å¯¹è±¡æ•°é‡çš„å‡†ç¡®æ€§ä»¥åŠå¯¹è±¡ä¹‹é—´ç©ºé—´å¸ƒå±€çš„ä¸€è‡´æ€§ã€‚è¿™äº›æ–¹æ³•é€šå¸¸ç¼ºä¹å¯¹å›¾åƒä¸­ç©ºé—´ç»“æ„çš„æœ‰æ•ˆç†è§£ï¼Œå¹¶ä¸”æ–‡æœ¬æŒ‡ä»¤çš„è¯­ä¹‰ä¿¡æ¯ä¸è¶³ä»¥æŒ‡å¯¼ç²¾ç¡®çš„å›¾åƒç¼–è¾‘ã€‚

**æ ¸å¿ƒæ€è·¯**ï¼šQL-Adapterçš„æ ¸å¿ƒæ€è·¯æ˜¯é€šè¿‡æ˜¾å¼åœ°èåˆå›¾åƒçš„å¸ƒå±€ä¿¡æ¯å’Œå¢å¼ºæ–‡æœ¬æŒ‡ä»¤çš„è¯­ä¹‰è¡¨è¾¾ï¼Œæ¥æé«˜æ¨¡å‹å¯¹å›¾åƒç©ºé—´ç»“æ„çš„ç†è§£å’Œå¯¹æ–‡æœ¬æŒ‡ä»¤çš„éµå¾ªèƒ½åŠ›ã€‚å…·ä½“æ¥è¯´ï¼Œåˆ©ç”¨å›¾åƒå¸ƒå±€å…ˆéªŒæ¥æŒ‡å¯¼å›¾åƒç‰¹å¾çš„å­¦ä¹ ï¼Œå¹¶åˆ©ç”¨å›¾åƒç‰¹å¾æ¥ä¸°å¯Œæ–‡æœ¬åµŒå…¥ï¼Œä»è€Œå®ç°æ›´ç²¾ç¡®å’Œå¯æ§çš„å¤šå¯¹è±¡å›¾åƒç¼–è¾‘ã€‚

**æŠ€æœ¯æ¡†æ¶**ï¼šQL-Adapteræ¡†æ¶åŒ…å«ä¸¤ä¸ªä¸»è¦æ¨¡å—ï¼šå›¾åƒ-å¸ƒå±€èåˆæ¨¡å—(ILFM)å’Œè·¨æ¨¡æ€å¢å¼ºæ¨¡å—(CMAM)ã€‚ILFMå°†æ£€æµ‹åˆ°çš„å¯¹è±¡å¸ƒå±€ä¿¡æ¯ä¸CLIPå›¾åƒç¼–ç å™¨æå–çš„ViT patch tokensè¿›è¡Œèåˆï¼Œä»è€Œå¢å¼ºæ¨¡å‹å¯¹å›¾åƒç©ºé—´ç»“æ„çš„ç†è§£ã€‚CMAMå°†å›¾åƒç‰¹å¾æ³¨å…¥åˆ°æ–‡æœ¬åˆ†æ”¯ä¸­ï¼Œä»¥ä¸°å¯Œæ–‡æœ¬åµŒå…¥ï¼Œä»è€Œæé«˜æ¨¡å‹å¯¹æ–‡æœ¬æŒ‡ä»¤çš„ç†è§£å’Œéµå¾ªèƒ½åŠ›ã€‚æ•´ä¸ªæµç¨‹æ˜¯å…ˆé€šè¿‡ILFMå¢å¼ºå›¾åƒç‰¹å¾ï¼Œå†é€šè¿‡CMAMå¢å¼ºæ–‡æœ¬ç‰¹å¾ï¼Œæœ€ååˆ©ç”¨å¢å¼ºåçš„ç‰¹å¾è¿›è¡Œå›¾åƒç¼–è¾‘ã€‚

**å…³é”®åˆ›æ–°**ï¼šQL-Adapterçš„å…³é”®åˆ›æ–°åœ¨äºå…¶æ˜¾å¼åœ°å°†å›¾åƒå¸ƒå±€ä¿¡æ¯èå…¥åˆ°å›¾åƒç‰¹å¾å­¦ä¹ ä¸­ï¼Œå¹¶åˆ©ç”¨å›¾åƒç‰¹å¾æ¥å¢å¼ºæ–‡æœ¬æŒ‡ä»¤çš„è¯­ä¹‰è¡¨è¾¾ã€‚è¿™ç§åŒå‘å¢å¼ºçš„æ–¹å¼ä½¿å¾—æ¨¡å‹èƒ½å¤Ÿæ›´å¥½åœ°ç†è§£å›¾åƒçš„ç©ºé—´ç»“æ„å’Œæ–‡æœ¬æŒ‡ä»¤çš„æ„å›¾ï¼Œä»è€Œå®ç°æ›´ç²¾ç¡®å’Œå¯æ§çš„å¤šå¯¹è±¡å›¾åƒç¼–è¾‘ã€‚ä¸ç°æœ‰æ–¹æ³•ç›¸æ¯”ï¼ŒQL-Adapteræ›´æ³¨é‡ç©ºé—´ä¿¡æ¯çš„åˆ©ç”¨å’Œè·¨æ¨¡æ€ä¿¡æ¯çš„èåˆã€‚

**å…³é”®è®¾è®¡**ï¼šILFMæ¨¡å—ä½¿ç”¨æ³¨æ„åŠ›æœºåˆ¶å°†å¸ƒå±€å…ˆéªŒä¿¡æ¯èå…¥åˆ°ViT patch tokensä¸­ã€‚CMAMæ¨¡å—ä½¿ç”¨äº¤å‰æ³¨æ„åŠ›æœºåˆ¶å°†å›¾åƒç‰¹å¾æ³¨å…¥åˆ°æ–‡æœ¬åµŒå…¥ä¸­ã€‚QL-Datasetçš„æ„å»ºè€ƒè™‘äº†ç±»åˆ«ã€å¸ƒå±€å’Œè®¡æ•°çš„å¤šæ ·æ€§ï¼Œä¸ºæ¨¡å‹çš„è®­ç»ƒå’Œè¯„ä¼°æä¾›äº†æ›´å…·æŒ‘æˆ˜æ€§çš„åœºæ™¯ã€‚æŸå¤±å‡½æ•°çš„è®¾è®¡å¯èƒ½åŒ…æ‹¬é‡å»ºæŸå¤±ã€å¯¹æ¯”æŸå¤±ç­‰ï¼Œä»¥ä¿è¯ç¼–è¾‘åå›¾åƒçš„è´¨é‡å’Œä¸æ–‡æœ¬æŒ‡ä»¤çš„ä¸€è‡´æ€§ï¼ˆå…·ä½“æŸå¤±å‡½æ•°ç»†èŠ‚æœªçŸ¥ï¼‰ã€‚

## ğŸ“Š å®éªŒäº®ç‚¹

QL-Adapteråœ¨QL-EditåŸºå‡†ä¸Šå–å¾—äº†state-of-the-artçš„æ€§èƒ½ï¼Œæ˜¾è‘—ä¼˜äºç°æœ‰çš„å›¾åƒç¼–è¾‘æ¨¡å‹ã€‚å…·ä½“æ€§èƒ½æ•°æ®ï¼ˆä¾‹å¦‚FIDã€CLIP scoreç­‰ï¼‰å’Œæå‡å¹…åº¦åœ¨è®ºæ–‡ä¸­è¿›è¡Œäº†è¯¦ç»†çš„å±•ç¤ºï¼ˆå…·ä½“æ•°å€¼æœªçŸ¥ï¼‰ã€‚å®éªŒç»“æœè¡¨æ˜ï¼ŒQL-Adapterèƒ½å¤Ÿæœ‰æ•ˆåœ°å¤„ç†å¤šå¯¹è±¡åœºæ™¯ï¼Œå¹¶ä¿è¯ç¼–è¾‘åå›¾åƒä¸­å¯¹è±¡æ•°é‡å’Œå¸ƒå±€çš„ä¸€è‡´æ€§ã€‚

## ğŸ¯ åº”ç”¨åœºæ™¯

è¯¥ç ”ç©¶æˆæœå¯åº”ç”¨äºå›¾åƒç¼–è¾‘ã€å†…å®¹åˆ›ä½œã€è™šæ‹Ÿç°å®ã€å¢å¼ºç°å®ç­‰é¢†åŸŸã€‚ä¾‹å¦‚ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡ç®€å•çš„æ–‡æœ¬æŒ‡ä»¤ï¼Œç²¾ç¡®åœ°æ§åˆ¶å›¾åƒä¸­å¤šä¸ªå¯¹è±¡çš„ä½ç½®ã€æ•°é‡å’Œç±»åˆ«ï¼Œä»è€Œå®ç°ä¸ªæ€§åŒ–çš„å›¾åƒç¼–è¾‘å’Œåˆ›ä½œã€‚è¯¥æŠ€æœ¯è¿˜æœ‰æ½œåŠ›åº”ç”¨äºè‡ªåŠ¨é©¾é©¶ã€æœºå™¨äººå¯¼èˆªç­‰é¢†åŸŸï¼Œæé«˜æœºå™¨å¯¹å¤æ‚åœºæ™¯çš„ç†è§£å’Œæ“ä½œèƒ½åŠ›ã€‚

## ğŸ“„ æ‘˜è¦ï¼ˆåŸæ–‡ï¼‰

> Instruction driven image editing with standard CLIP text encoders often fails in complex scenes with many objects. We present QL-Adapter, a framework for multiple object editing that tackles two challenges: enforcing object counts and spatial layouts, and accommodating diverse categories. QL-Adapter consists of two core modules: the Image-Layout Fusion Module (ILFM) and the Cross-Modal Augmentation Module (CMAM). ILFM fuses layout priors with ViT patch tokens from the CLIP image encoder to strengthen spatial structure understanding. CMAM injects image features into the text branch to enrich textual embeddings and improve instruction following. We further build QL-Dataset, a benchmark that spans broad category, layout, and count variations, and define the task of quantity and layout consistent image editing (QL-Edit). Extensive experiments show that QL-Adapter achieves state of the art performance on QL-Edit and significantly outperforms existing models.

