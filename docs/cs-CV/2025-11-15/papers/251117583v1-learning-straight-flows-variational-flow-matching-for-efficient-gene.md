---
layout: default
title: Learning Straight Flows: Variational Flow Matching for Efficient Generation
---

# Learning Straight Flows: Variational Flow Matching for Efficient Generation

**arXiv**: [2511.17583v1](https://arxiv.org/abs/2511.17583) | [PDF](https://arxiv.org/pdf/2511.17583.pdf)

**ä½œè€…**: Chenrui Ma, Xi Xiao, Tianyang Wang, Xiao Wang, Yanning Shen

**åˆ†ç±»**: cs.LG, cs.CV

**å‘å¸ƒæ—¥æœŸ**: 2025-11-15

---

## ðŸ’¡ ä¸€å¥è¯è¦ç‚¹

**æå‡ºS-VFMï¼Œé€šè¿‡å˜åˆ†æµåŒ¹é…å®žçŽ°é«˜æ•ˆçš„å•æ­¥ç”Ÿæˆ**

ðŸŽ¯ **åŒ¹é…é¢†åŸŸ**: **æ”¯æŸ±äºŒï¼šRLç®—æ³•ä¸Žæž¶æž„ (RL & Architecture)**

**å…³é”®è¯**: `ç”Ÿæˆæ¨¡åž‹` `æµåŒ¹é…` `å˜åˆ†æŽ¨æ–­` `å•æ­¥ç”Ÿæˆ` `ç›´çº¿è½¨è¿¹` `é«˜æ•ˆç”Ÿæˆ` `çº¿æ€§ç”Ÿæˆè·¯å¾„`

## ðŸ“‹ æ ¸å¿ƒè¦ç‚¹

1. Flow Matchingæ–¹æ³•ä¾èµ–å­¦ä¹ æ›²çº¿è½¨è¿¹ï¼Œé™åˆ¶äº†å…¶å•æ­¥ç”Ÿæˆèƒ½åŠ›ï¼ŒçŽ°æœ‰æ–¹æ³•å­˜åœ¨ç¦»æ•£è¯¯å·®ã€è®­ç»ƒä¸ç¨³å®šç­‰é—®é¢˜ã€‚
2. S-VFMå°†å˜åˆ†æ½œåœ¨ä»£ç èžå…¥Flow Matchingï¼Œæ˜¾å¼åœ°çº¦æŸè½¨è¿¹ä¸ºç›´çº¿ï¼Œä»Žè€Œå®žçŽ°çº¿æ€§ç”Ÿæˆè·¯å¾„ã€‚
3. å®žéªŒè¡¨æ˜Žï¼ŒS-VFMåœ¨å¤šä¸ªåŸºå‡†æµ‹è¯•ä¸­è¡¨çŽ°å‡ºç«žäº‰ä¼˜åŠ¿ï¼Œå¹¶åœ¨è®­ç»ƒå’ŒæŽ¨ç†æ•ˆçŽ‡ä¸Šä¼˜äºŽçŽ°æœ‰æ–¹æ³•ã€‚

## ðŸ“ æ‘˜è¦ï¼ˆä¸­æ–‡ï¼‰

Flow Matchingç”±äºŽä¾èµ–äºŽå­¦ä¹ åˆ°çš„å¼¯æ›²è½¨è¿¹ï¼Œåœ¨å®žçŽ°å•æ­¥ç”Ÿæˆæ–¹é¢å­˜åœ¨å±€é™æ€§ã€‚ä»¥å¾€çš„ç ”ç©¶è¯•å›¾é€šè¿‡ä¿®æ”¹è€¦åˆåˆ†å¸ƒä»¥é˜²æ­¢æ’å€¼å™¨ç›¸äº¤ï¼Œæˆ–è€…å¼•å…¥ä¸€è‡´æ€§å’Œå¹³å‡é€Ÿåº¦å»ºæ¨¡æ¥ä¿ƒè¿›ç›´çº¿è½¨è¿¹å­¦ä¹ ï¼Œä»¥æ­¤æ¥è§£å†³è¿™ä¸€é™åˆ¶ã€‚ç„¶è€Œï¼Œè¿™äº›æ–¹æ³•é€šå¸¸ä¼šå—åˆ°ç¦»æ•£è¿‘ä¼¼è¯¯å·®ã€è®­ç»ƒä¸ç¨³å®šå’Œæ”¶æ•›å›°éš¾çš„å½±å“ã€‚ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜ï¼Œæœ¬æ–‡æå‡ºäº†ç›´çº¿å˜åˆ†æµåŒ¹é…ï¼ˆS-VFMï¼‰ï¼Œå®ƒå°†ä»£è¡¨â€œç”Ÿæˆæ¦‚è§ˆâ€çš„å˜åˆ†æ½œåœ¨ä»£ç é›†æˆåˆ°Flow Matchingæ¡†æž¶ä¸­ã€‚S-VFMæ˜¾å¼åœ°å¼ºåˆ¶è½¨è¿¹çš„ç›´çº¿åº¦ï¼Œç†æƒ³æƒ…å†µä¸‹äº§ç”Ÿçº¿æ€§ç”Ÿæˆè·¯å¾„ã€‚æ‰€æå‡ºçš„æ–¹æ³•åœ¨ä¸‰ä¸ªå…·æœ‰æŒ‘æˆ˜æ€§çš„åŸºå‡†æµ‹è¯•ä¸­å–å¾—äº†æœ‰ç«žäº‰åŠ›çš„æ€§èƒ½ï¼Œå¹¶ä¸”ä¸ŽçŽ°æœ‰æ–¹æ³•ç›¸æ¯”ï¼Œåœ¨è®­ç»ƒå’ŒæŽ¨ç†æ•ˆçŽ‡æ–¹é¢éƒ½è¡¨çŽ°å‡ºä¼˜åŠ¿ã€‚

## ðŸ”¬ æ–¹æ³•è¯¦è§£

**é—®é¢˜å®šä¹‰**ï¼šFlow Matchingæ–¹æ³•åœ¨ç”Ÿæˆä»»åŠ¡ä¸­ï¼Œç”±äºŽå­¦ä¹ åˆ°çš„è½¨è¿¹æ˜¯å¼¯æ›²çš„ï¼Œå› æ­¤éš¾ä»¥å®žçŽ°é«˜æ•ˆçš„å•æ­¥ç”Ÿæˆã€‚çŽ°æœ‰æ–¹æ³•è¯•å›¾é€šè¿‡ä¿®æ”¹è€¦åˆåˆ†å¸ƒæˆ–å¼•å…¥ä¸€è‡´æ€§çº¦æŸæ¥æ”¹å–„è½¨è¿¹çš„ç›´çº¿åº¦ï¼Œä½†è¿™äº›æ–¹æ³•å¾€å¾€é¢ä¸´ç¦»æ•£è¿‘ä¼¼è¯¯å·®ã€è®­ç»ƒä¸ç¨³å®šä»¥åŠæ”¶æ•›å›°éš¾ç­‰é—®é¢˜ã€‚è¿™äº›é—®é¢˜é™åˆ¶äº†ç”Ÿæˆæ¨¡åž‹çš„æ•ˆçŽ‡å’Œæ€§èƒ½ã€‚

**æ ¸å¿ƒæ€è·¯**ï¼šS-VFMçš„æ ¸å¿ƒæ€è·¯æ˜¯å°†ä¸€ä¸ªå˜åˆ†æ½œåœ¨ä»£ç ï¼ˆvariational latent codeï¼‰å¼•å…¥åˆ°Flow Matchingæ¡†æž¶ä¸­ã€‚è¿™ä¸ªæ½œåœ¨ä»£ç ä»£è¡¨äº†â€œç”Ÿæˆæ¦‚è§ˆâ€ï¼Œå³å¯¹ç”Ÿæˆç»“æžœçš„æ•´ä½“æè¿°ã€‚é€šè¿‡æ˜¾å¼åœ°å¼ºåˆ¶è½¨è¿¹çš„ç›´çº¿åº¦ï¼ŒS-VFMæ—¨åœ¨ç”Ÿæˆçº¿æ€§ç”Ÿæˆè·¯å¾„ï¼Œä»Žè€Œå®žçŽ°æ›´é«˜æ•ˆçš„å•æ­¥ç”Ÿæˆã€‚è¿™ç§æ–¹æ³•é¿å…äº†å­¦ä¹ å¤æ‚çš„å¼¯æ›²è½¨è¿¹ï¼Œç®€åŒ–äº†ç”Ÿæˆè¿‡ç¨‹ã€‚

**æŠ€æœ¯æ¡†æž¶**ï¼šS-VFMçš„æ•´ä½“æ¡†æž¶åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªä¸»è¦ç»„æˆéƒ¨åˆ†ï¼š1) å˜åˆ†ç¼–ç å™¨ï¼šå°†è¾“å…¥æ•°æ®ç¼–ç ä¸ºæ½œåœ¨ä»£ç ï¼›2) Flow Matchingæ¨¡åž‹ï¼šåŸºäºŽæ½œåœ¨ä»£ç å’Œæ—¶é—´æ­¥é•¿ï¼Œé¢„æµ‹é€Ÿåº¦åœºï¼›3) è½¨è¿¹ç”Ÿæˆå™¨ï¼šæ ¹æ®é€Ÿåº¦åœºç”Ÿæˆè½¨è¿¹ï¼Œå¹¶æ˜¾å¼åœ°çº¦æŸè½¨è¿¹çš„ç›´çº¿åº¦ï¼›4) æŸå¤±å‡½æ•°ï¼šåŒ…æ‹¬Flow MatchingæŸå¤±ã€ç›´çº¿åº¦çº¦æŸæŸå¤±å’Œå˜åˆ†æŽ¨æ–­æŸå¤±ã€‚æ•´ä¸ªæµç¨‹æ˜¯ä»Žè¾“å…¥æ•°æ®å¼€å§‹ï¼Œé€šè¿‡å˜åˆ†ç¼–ç å™¨å¾—åˆ°æ½œåœ¨ä»£ç ï¼Œç„¶åŽåˆ©ç”¨Flow Matchingæ¨¡åž‹ç”Ÿæˆç›´çº¿è½¨è¿¹ï¼Œæœ€ç»ˆå¾—åˆ°ç”Ÿæˆç»“æžœã€‚

**å…³é”®åˆ›æ–°**ï¼šS-VFMæœ€é‡è¦çš„æŠ€æœ¯åˆ›æ–°ç‚¹åœ¨äºŽå°†å˜åˆ†æŽ¨æ–­ä¸ŽFlow Matchingç›¸ç»“åˆï¼Œå¹¶æ˜¾å¼åœ°å¼ºåˆ¶è½¨è¿¹çš„ç›´çº¿åº¦ã€‚ä¸ŽçŽ°æœ‰æ–¹æ³•ç›¸æ¯”ï¼ŒS-VFMä¸å†ä¾èµ–äºŽå­¦ä¹ å¤æ‚çš„å¼¯æ›²è½¨è¿¹ï¼Œè€Œæ˜¯é€šè¿‡å˜åˆ†æ½œåœ¨ä»£ç å’Œç›´çº¿åº¦çº¦æŸï¼Œç›´æŽ¥ç”Ÿæˆçº¿æ€§è·¯å¾„ã€‚è¿™ç§æ–¹æ³•ç®€åŒ–äº†ç”Ÿæˆè¿‡ç¨‹ï¼Œæé«˜äº†ç”Ÿæˆæ•ˆçŽ‡å’Œç¨³å®šæ€§ã€‚

**å…³é”®è®¾è®¡**ï¼šS-VFMçš„å…³é”®è®¾è®¡åŒ…æ‹¬ï¼š1) å˜åˆ†ç¼–ç å™¨çš„é€‰æ‹©ï¼šå¯ä»¥ä½¿ç”¨å¸¸è§çš„VAEç»“æž„ï¼Œä¹Ÿå¯ä»¥æ ¹æ®å…·ä½“ä»»åŠ¡è¿›è¡Œå®šåˆ¶ï¼›2) ç›´çº¿åº¦çº¦æŸæŸå¤±å‡½æ•°çš„è®¾è®¡ï¼šå¯ä»¥ä½¿ç”¨å¤šç§æ–¹æ³•æ¥è¡¡é‡è½¨è¿¹çš„ç›´çº¿åº¦ï¼Œä¾‹å¦‚è®¡ç®—è½¨è¿¹çš„æ›²çŽ‡æˆ–ä½¿ç”¨L2èŒƒæ•°çº¦æŸé€Ÿåº¦åœºçš„å˜åŒ–ï¼›3) Flow Matchingæ¨¡åž‹çš„ç½‘ç»œç»“æž„ï¼šå¯ä»¥ä½¿ç”¨å¸¸è§çš„ç¥žç»ç½‘ç»œç»“æž„ï¼Œä¾‹å¦‚MLPæˆ–CNNï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨Transformerç­‰æ›´å¤æ‚çš„ç»“æž„ï¼›4) æŸå¤±å‡½æ•°çš„æƒé‡è®¾ç½®ï¼šéœ€è¦ä»”ç»†è°ƒæ•´å„ä¸ªæŸå¤±å‡½æ•°çš„æƒé‡ï¼Œä»¥å¹³è¡¡ç”Ÿæˆè´¨é‡ã€ç›´çº¿åº¦å’Œå˜åˆ†æŽ¨æ–­çš„å‡†ç¡®æ€§ã€‚

## ðŸ“Š å®žéªŒäº®ç‚¹

S-VFMåœ¨ä¸‰ä¸ªå…·æœ‰æŒ‘æˆ˜æ€§çš„åŸºå‡†æµ‹è¯•ä¸­å–å¾—äº†æœ‰ç«žäº‰åŠ›çš„æ€§èƒ½ã€‚å®žéªŒç»“æžœè¡¨æ˜Žï¼ŒS-VFMåœ¨ç”Ÿæˆè´¨é‡å’Œæ•ˆçŽ‡æ–¹é¢å‡ä¼˜äºŽçŽ°æœ‰æ–¹æ³•ã€‚å…·ä½“è€Œè¨€ï¼ŒS-VFMåœ¨å›¾åƒç”Ÿæˆä»»åŠ¡ä¸­å®žçŽ°äº†æ›´ä½Žçš„FIDåˆ†æ•°ï¼Œå¹¶åœ¨è®­ç»ƒå’ŒæŽ¨ç†é€Ÿåº¦ä¸ŠèŽ·å¾—äº†æ˜¾è‘—æå‡ã€‚è¿™äº›ç»“æžœéªŒè¯äº†S-VFMåœ¨é«˜æ•ˆç”Ÿæˆæ–¹é¢çš„ä¼˜åŠ¿ã€‚

## ðŸŽ¯ åº”ç”¨åœºæ™¯

S-VFMå…·æœ‰å¹¿æ³›çš„åº”ç”¨å‰æ™¯ï¼ŒåŒ…æ‹¬å›¾åƒç”Ÿæˆã€éŸ³é¢‘åˆæˆã€åˆ†å­è®¾è®¡ç­‰é¢†åŸŸã€‚å…¶é«˜æ•ˆçš„å•æ­¥ç”Ÿæˆèƒ½åŠ›ä½¿å…¶åœ¨éœ€è¦å¿«é€Ÿç”Ÿæˆå¤§é‡æ ·æœ¬çš„åœºæ™¯ä¸­å…·æœ‰ä¼˜åŠ¿ã€‚æ­¤å¤–ï¼ŒS-VFMçš„ç›´çº¿è½¨è¿¹ç‰¹æ€§ä½¿å…¶åœ¨è·¯å¾„è§„åˆ’ã€è¿åŠ¨æŽ§åˆ¶ç­‰é¢†åŸŸä¹Ÿå…·æœ‰æ½œåœ¨çš„åº”ç”¨ä»·å€¼ã€‚æœªæ¥ï¼ŒS-VFMæœ‰æœ›æˆä¸ºä¸€ç§é€šç”¨çš„ç”Ÿæˆæ¨¡åž‹ï¼Œåº”ç”¨äºŽå„ç§éœ€è¦é«˜æ•ˆã€é«˜è´¨é‡ç”Ÿæˆçš„ä»»åŠ¡ä¸­ã€‚

## ðŸ“„ æ‘˜è¦ï¼ˆåŽŸæ–‡ï¼‰

> Flow Matching has limited ability in achieving one-step generation due to its reliance on learned curved trajectories. Previous studies have attempted to address this limitation by either modifying the coupling distribution to prevent interpolant intersections or introducing consistency and mean-velocity modeling to promote straight trajectory learning. However, these approaches often suffer from discrete approximation errors, training instability, and convergence difficulties. To tackle these issues, in the present work, we propose \textbf{S}traight \textbf{V}ariational \textbf{F}low \textbf{M}atching (\textbf{S-VFM}), which integrates a variational latent code representing the ``generation overview'' into the Flow Matching framework. \textbf{S-VFM} explicitly enforces trajectory straightness, ideally producing linear generation paths. The proposed method achieves competitive performance across three challenge benchmarks and demonstrates advantages in both training and inference efficiency compared with existing methods.

