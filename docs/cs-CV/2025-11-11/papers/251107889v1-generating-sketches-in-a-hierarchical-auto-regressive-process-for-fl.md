---
layout: default
title: Generating Sketches in a Hierarchical Auto-Regressive Process for Flexible Sketch Drawing Manipulation at Stroke-Level
---

# Generating Sketches in a Hierarchical Auto-Regressive Process for Flexible Sketch Drawing Manipulation at Stroke-Level

**arXiv**: [2511.07889v1](https://arxiv.org/abs/2511.07889) | [PDF](https://arxiv.org/pdf/2511.07889.pdf)

**ä½œè€…**: Sicong Zang, Shuhui Gao, Zhijun Fang

**åˆ†ç±»**: cs.CV, cs.AI

**å‘å¸ƒæ—¥æœŸ**: 2025-11-11

**å¤‡æ³¨**: Accepted by AAAI 2026

---

## ðŸ’¡ ä¸€å¥è¯è¦ç‚¹

**æå‡ºä¸€ç§åˆ†å±‚è‡ªå›žå½’è‰å›¾ç”Ÿæˆæ–¹æ³•ï¼Œå®žçŽ°ç¬”ç”»çº§çµæ´»æ“æŽ§**

ðŸŽ¯ **åŒ¹é…é¢†åŸŸ**: **æ”¯æŸ±ä¸€ï¼šæœºå™¨äººæŽ§åˆ¶ (Robot Control)**

**å…³é”®è¯**: `è‰å›¾ç”Ÿæˆ` `è‡ªå›žå½’æ¨¡åž‹` `åˆ†å±‚ç»“æž„` `ç¬”ç”»çº§åˆ«æŽ§åˆ¶` `å¯æŽ§ç”Ÿæˆ`

## ðŸ“‹ æ ¸å¿ƒè¦ç‚¹

1. çŽ°æœ‰è‰å›¾ç”Ÿæˆæ–¹æ³•ç¼ºä¹çµæ´»æ€§ï¼Œéœ€è¦åœ¨ç”Ÿæˆå‰ç¡®å®šæ‰€æœ‰ç¬”ç”»çš„æŽ§åˆ¶æ¡ä»¶ï¼Œæ— æ³•åœ¨ç”Ÿæˆè¿‡ç¨‹ä¸­è¿›è¡Œè°ƒæ•´ã€‚
2. æœ¬æ–‡æå‡ºåˆ†å±‚è‡ªå›žå½’çš„è‰å›¾ç”Ÿæˆæ¡†æž¶ï¼Œå°†è‰å›¾ç”Ÿæˆåˆ†è§£ä¸ºç¬”ç”»é¢„æµ‹ã€é”šå®šå’Œè½¬æ¢ä¸‰ä¸ªé˜¶æ®µï¼Œå®žçŽ°ç¬”ç”»çº§åˆ«çš„çµæ´»æ“æŽ§ã€‚
3. é€šè¿‡è‡ªå›žå½’æ–¹å¼ï¼Œæ¨¡åž‹èƒ½å¤Ÿè€ƒè™‘å·²ç”Ÿæˆç¬”ç”»çš„ä¿¡æ¯ï¼Œä»Žè€Œåœ¨åˆé€‚çš„ä½ç½®ç”Ÿæˆåˆé€‚çš„ç¬”ç”»ï¼Œæå‡æ•´ä½“ç”Ÿæˆæ•ˆæžœã€‚

## ðŸ“ æ‘˜è¦ï¼ˆä¸­æ–‡ï¼‰

æœ¬æ–‡æå‡ºäº†ä¸€ç§åˆ†å±‚è‡ªå›žå½’è‰å›¾ç”Ÿæˆè¿‡ç¨‹ï¼Œæ—¨åœ¨å®žçŽ°å¯¹è‰å›¾çš„å¯æŽ§ç”Ÿæˆï¼Œå³ä»¥æœŸæœ›çš„ç‰¹å®šæ¨¡å¼ç”Ÿæˆè‰å›¾ã€‚çŽ°æœ‰æ–¹æ³•é€šè¿‡ç¼–è¾‘ç¬”ç”»åµŒå…¥çš„å€¼æ¥æŽ§åˆ¶ç¬”ç”»çº§åˆ«çš„è‰å›¾ç‰¹å¾ï¼Œä½†éœ€è¦åœ¨ç”Ÿæˆå¼€å§‹å‰åŒæ—¶æ”¶é›†æ‰€æœ‰ç¼–è¾‘è¿‡çš„æ¡ä»¶å¹¶è¾“å…¥åˆ°ç”Ÿæˆå™¨ä¸­ï¼Œå¯¼è‡´ç”Ÿæˆè¿‡ç¨‹ä¸­æ— æ³•è¿›è¡Œè¿›ä¸€æ­¥çš„æ“ä½œã€‚ä¸ºäº†æ›´çµæ´»åœ°æ“æŽ§è‰å›¾ç»˜åˆ¶ï¼Œæœ¬æ–‡å°†è‰å›¾ç”Ÿæˆè¿‡ç¨‹åˆ†è§£ä¸ºä¸‰ä¸ªé˜¶æ®µçš„åˆ†å±‚ç»“æž„ï¼š1) é¢„æµ‹ç¬”ç”»åµŒå…¥ï¼Œè¡¨ç¤ºè¦ç»˜åˆ¶çš„ç¬”ç”»ï¼›2) å°†é¢„æµ‹çš„ç¬”ç”»é”šå®šåœ¨ç”»å¸ƒä¸Šï¼›3) å°†åµŒå…¥è½¬æ¢ä¸ºä¸€ç³»åˆ—ç»˜åˆ¶åŠ¨ä½œï¼Œå½¢æˆå®Œæ•´çš„è‰å›¾ã€‚æ­¤å¤–ï¼Œç¬”ç”»é¢„æµ‹ã€é”šå®šå’Œè½¬æ¢éƒ½æ˜¯è‡ªå›žå½’è¿›è¡Œçš„ï¼Œå³è€ƒè™‘æœ€è¿‘ç”Ÿæˆçš„ç¬”ç”»åŠå…¶ä½ç½®æ¥é¢„æµ‹å½“å‰ç¬”ç”»ï¼Œå¼•å¯¼æ¨¡åž‹åœ¨åˆé€‚çš„ä½ç½®ç”Ÿæˆåˆé€‚çš„ç¬”ç”»ï¼Œä»Žè€Œæœ‰åˆ©äºŽå®Œæ•´è‰å›¾çš„ç”Ÿæˆã€‚é€šè¿‡è°ƒæ•´æš´éœ²çš„å¯ç¼–è¾‘ç¬”ç”»åµŒå…¥ï¼Œå¯ä»¥åœ¨ç”Ÿæˆè¿‡ç¨‹ä¸­çš„ä»»ä½•æ—¶é—´çµæ´»åœ°æ“æŽ§ç¬”ç”»çº§åˆ«çš„è‰å›¾ç»˜åˆ¶ã€‚

## ðŸ”¬ æ–¹æ³•è¯¦è§£

**é—®é¢˜å®šä¹‰**ï¼šçŽ°æœ‰è‰å›¾ç”Ÿæˆæ–¹æ³•çš„ä¸»è¦ç—›ç‚¹åœ¨äºŽç¼ºä¹çµæ´»æ€§ã€‚ä¸ºäº†æŽ§åˆ¶è‰å›¾çš„ç”Ÿæˆï¼ŒçŽ°æœ‰æ–¹æ³•é€šå¸¸éœ€è¦é¢„å…ˆå®šä¹‰å¥½æ‰€æœ‰ç¬”ç”»çš„åµŒå…¥è¡¨ç¤ºï¼Œå¹¶åœ¨ç”Ÿæˆå¼€å§‹å‰ä¸€æ¬¡æ€§è¾“å…¥åˆ°ç”Ÿæˆå™¨ä¸­ã€‚è¿™æ„å‘³ç€åœ¨è‰å›¾ç”Ÿæˆè¿‡ç¨‹ä¸­ï¼Œç”¨æˆ·æ— æ³•å¯¹å·²ç»ç”Ÿæˆçš„ç¬”ç”»è¿›è¡Œä¿®æ”¹æˆ–è°ƒæ•´ï¼Œä»Žè€Œé™åˆ¶äº†è‰å›¾çš„åˆ›ä½œè‡ªç”±åº¦å’Œäº¤äº’æ€§ã€‚

**æ ¸å¿ƒæ€è·¯**ï¼šæœ¬æ–‡çš„æ ¸å¿ƒæ€è·¯æ˜¯å°†è‰å›¾ç”Ÿæˆè¿‡ç¨‹åˆ†è§£ä¸ºå¤šä¸ªå¯æŽ§çš„æ­¥éª¤ï¼Œå¹¶é‡‡ç”¨è‡ªå›žå½’çš„æ–¹å¼é€æ­¥ç”Ÿæˆè‰å›¾ã€‚å…·ä½“æ¥è¯´ï¼Œæ¨¡åž‹é¦–å…ˆé¢„æµ‹ä¸‹ä¸€ä¸ªè¦ç»˜åˆ¶çš„ç¬”ç”»çš„åµŒå…¥è¡¨ç¤ºï¼Œç„¶åŽå°†è¯¥ç¬”ç”»é”šå®šåœ¨ç”»å¸ƒä¸Šçš„åˆé€‚ä½ç½®ï¼Œæœ€åŽå°†ç¬”ç”»åµŒå…¥è½¬æ¢ä¸ºä¸€ç³»åˆ—ç»˜åˆ¶åŠ¨ä½œã€‚é€šè¿‡è¿™ç§åˆ†å±‚ç»“æž„ï¼Œç”¨æˆ·å¯ä»¥åœ¨ç”Ÿæˆè¿‡ç¨‹ä¸­çš„ä»»ä½•é˜¶æ®µå¯¹ç¬”ç”»åµŒå…¥è¿›è¡Œä¿®æ”¹ï¼Œä»Žè€Œå®žçŽ°å¯¹è‰å›¾çš„çµæ´»æ“æŽ§ã€‚

**æŠ€æœ¯æ¡†æž¶**ï¼šè¯¥æ–¹æ³•çš„æŠ€æœ¯æ¡†æž¶åŒ…å«ä¸‰ä¸ªä¸»è¦é˜¶æ®µï¼šç¬”ç”»é¢„æµ‹ã€ç¬”ç”»é”šå®šå’Œç¬”ç”»è½¬æ¢ã€‚1) ç¬”ç”»é¢„æµ‹é˜¶æ®µï¼šæ¨¡åž‹æ ¹æ®å·²ç”Ÿæˆçš„ç¬”ç”»ä¿¡æ¯ï¼Œé¢„æµ‹ä¸‹ä¸€ä¸ªè¦ç»˜åˆ¶çš„ç¬”ç”»çš„åµŒå…¥è¡¨ç¤ºã€‚2) ç¬”ç”»é”šå®šé˜¶æ®µï¼šæ¨¡åž‹å°†é¢„æµ‹çš„ç¬”ç”»åµŒå…¥é”šå®šåœ¨ç”»å¸ƒä¸Šçš„åˆé€‚ä½ç½®ï¼Œç¡®å®šç¬”ç”»çš„èµ·å§‹ç‚¹ã€‚3) ç¬”ç”»è½¬æ¢é˜¶æ®µï¼šæ¨¡åž‹å°†ç¬”ç”»åµŒå…¥è½¬æ¢ä¸ºä¸€ç³»åˆ—ç»˜åˆ¶åŠ¨ä½œï¼Œä¾‹å¦‚ç¬”çš„ç§»åŠ¨ã€åŽ‹åŠ›ç­‰ï¼Œä»Žè€Œå®Œæˆç¬”ç”»çš„ç»˜åˆ¶ã€‚è¿™ä¸‰ä¸ªé˜¶æ®µä»¥è‡ªå›žå½’çš„æ–¹å¼è¿›è¡Œï¼Œå³æ¯ä¸ªé˜¶æ®µçš„è¾“å‡ºéƒ½ä¼šä½œä¸ºä¸‹ä¸€ä¸ªé˜¶æ®µçš„è¾“å…¥ï¼Œä»Žè€Œå®žçŽ°å¯¹è‰å›¾çš„é€æ­¥ç”Ÿæˆã€‚

**å…³é”®åˆ›æ–°**ï¼šæœ¬æ–‡æœ€é‡è¦çš„æŠ€æœ¯åˆ›æ–°ç‚¹åœ¨äºŽæå‡ºäº†åˆ†å±‚è‡ªå›žå½’çš„è‰å›¾ç”Ÿæˆæ¡†æž¶ã€‚ä¸ŽçŽ°æœ‰æ–¹æ³•ç›¸æ¯”ï¼Œè¯¥æ¡†æž¶å…·æœ‰æ›´é«˜çš„çµæ´»æ€§å’Œå¯æŽ§æ€§ï¼Œå…è®¸ç”¨æˆ·åœ¨ç”Ÿæˆè¿‡ç¨‹ä¸­çš„ä»»ä½•é˜¶æ®µå¯¹ç¬”ç”»è¿›è¡Œä¿®æ”¹å’Œè°ƒæ•´ã€‚æ­¤å¤–ï¼Œé€šè¿‡è‡ªå›žå½’çš„æ–¹å¼ï¼Œæ¨¡åž‹èƒ½å¤Ÿæ›´å¥½åœ°åˆ©ç”¨å·²ç”Ÿæˆçš„ç¬”ç”»ä¿¡æ¯ï¼Œä»Žè€Œç”Ÿæˆæ›´è‡ªç„¶ã€æ›´ç¬¦åˆç”¨æˆ·æ„å›¾çš„è‰å›¾ã€‚

**å…³é”®è®¾è®¡**ï¼šåœ¨ç¬”ç”»é¢„æµ‹é˜¶æ®µï¼Œå¯ä»¥ä½¿ç”¨å¾ªçŽ¯ç¥žç»ç½‘ç»œï¼ˆRNNï¼‰æˆ–Transformerç­‰åºåˆ—æ¨¡åž‹æ¥é¢„æµ‹ç¬”ç”»åµŒå…¥ã€‚åœ¨ç¬”ç”»é”šå®šé˜¶æ®µï¼Œå¯ä»¥ä½¿ç”¨å›žå½’æ¨¡åž‹æ¥é¢„æµ‹ç¬”ç”»çš„èµ·å§‹ä½ç½®ã€‚åœ¨ç¬”ç”»è½¬æ¢é˜¶æ®µï¼Œå¯ä»¥ä½¿ç”¨ç”Ÿæˆå¯¹æŠ—ç½‘ç»œï¼ˆGANï¼‰æˆ–å˜åˆ†è‡ªç¼–ç å™¨ï¼ˆVAEï¼‰ç­‰ç”Ÿæˆæ¨¡åž‹æ¥ç”Ÿæˆç¬”ç”»çš„ç»˜åˆ¶åŠ¨ä½œã€‚æŸå¤±å‡½æ•°å¯ä»¥åŒ…æ‹¬ç¬”ç”»é¢„æµ‹çš„äº¤å‰ç†µæŸå¤±ã€ç¬”ç”»é”šå®šçš„å‡æ–¹è¯¯å·®æŸå¤±ä»¥åŠç¬”ç”»è½¬æ¢çš„å¯¹æŠ—æŸå¤±æˆ–é‡æž„æŸå¤±ã€‚

## ðŸ“Š å®žéªŒäº®ç‚¹

è®ºæ–‡é‡ç‚¹åœ¨äºŽæå‡ºäº†ä¸€ç§æ–°çš„è‰å›¾ç”Ÿæˆæ¡†æž¶ï¼Œå¹¶å±•ç¤ºäº†å…¶åœ¨ç¬”ç”»çº§åˆ«æ“æŽ§æ–¹é¢çš„ä¼˜åŠ¿ã€‚è™½ç„¶æ‘˜è¦ä¸­æ²¡æœ‰æ˜Žç¡®æåŠå…·ä½“çš„æ€§èƒ½æ•°æ®æˆ–å¯¹æ¯”åŸºçº¿ï¼Œä½†å¼ºè°ƒäº†è¯¥æ–¹æ³•åœ¨çµæ´»æ€§å’Œå¯æŽ§æ€§æ–¹é¢çš„æå‡ã€‚æœªæ¥çš„å·¥ä½œå¯ä»¥è¿›ä¸€æ­¥é‡åŒ–è¿™äº›ä¼˜åŠ¿ï¼Œå¹¶ä¸Žå…¶ä»–æ–¹æ³•è¿›è¡Œæ›´å…¨é¢çš„æ¯”è¾ƒã€‚

## ðŸŽ¯ åº”ç”¨åœºæ™¯

è¯¥ç ”ç©¶æˆæžœå¯åº”ç”¨äºŽè‰å›¾è®¾è®¡ã€ç»˜ç”»åˆ›ä½œã€äººæœºäº¤äº’ç­‰é¢†åŸŸã€‚ä¾‹å¦‚ï¼Œè®¾è®¡å¸ˆå¯ä»¥ä½¿ç”¨è¯¥æ–¹æ³•å¿«é€Ÿç”Ÿæˆè‰å›¾ï¼Œå¹¶æ ¹æ®éœ€è¦å¯¹è‰å›¾è¿›è¡Œä¿®æ”¹å’Œè°ƒæ•´ã€‚ç”¨æˆ·å¯ä»¥é€šè¿‡æ‰‹åŠ¿æˆ–è¯­éŸ³ç­‰æ–¹å¼ä¸Žç³»ç»Ÿè¿›è¡Œäº¤äº’ï¼Œå®žæ—¶æŽ§åˆ¶è‰å›¾çš„ç”Ÿæˆè¿‡ç¨‹ã€‚æ­¤å¤–ï¼Œè¯¥æ–¹æ³•è¿˜å¯ä»¥ç”¨äºŽæ•™è‚²é¢†åŸŸï¼Œå¸®åŠ©å­¦ç”Ÿå­¦ä¹ ç»˜ç”»æŠ€å·§å’Œæé«˜åˆ›ä½œèƒ½åŠ›ã€‚

## ðŸ“„ æ‘˜è¦ï¼ˆåŽŸæ–‡ï¼‰

> Generating sketches with specific patterns as expected, i.e., manipulating sketches in a controllable way, is a popular task. Recent studies control sketch features at stroke-level by editing values of stroke embeddings as conditions. However, in order to provide generator a global view about what a sketch is going to be drawn, all these edited conditions should be collected and fed into generator simultaneously before generation starts, i.e., no further manipulation is allowed during sketch generating process. In order to realize sketch drawing manipulation more flexibly, we propose a hierarchical auto-regressive sketch generating process. Instead of generating an entire sketch at once, each stroke in a sketch is generated in a three-staged hierarchy: 1) predicting a stroke embedding to represent which stroke is going to be drawn, and 2) anchoring the predicted stroke on the canvas, and 3) translating the embedding to a sequence of drawing actions to form the full sketch. Moreover, the stroke prediction, anchoring and translation are proceeded auto-regressively, i.e., both the recently generated strokes and their positions are considered to predict the current one, guiding model to produce an appropriate stroke at a suitable position to benefit the full sketch generation. It is flexible to manipulate stroke-level sketch drawing at any time during generation by adjusting the exposed editable stroke embeddings.

