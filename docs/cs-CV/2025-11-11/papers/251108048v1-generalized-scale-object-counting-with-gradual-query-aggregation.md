---
layout: default
title: Generalized-Scale Object Counting with Gradual Query Aggregation
---

# Generalized-Scale Object Counting with Gradual Query Aggregation

**arXiv**: [2511.08048v1](https://arxiv.org/abs/2511.08048) | [PDF](https://arxiv.org/pdf/2511.08048.pdf)

**ä½œè€…**: Jer Pelhan, Alan Lukezic, Matej Kristan

**åˆ†ç±»**: cs.CV

**å‘å¸ƒæ—¥æœŸ**: 2025-11-11

**å¤‡æ³¨**: Accepted to AAAI2026, code: https://github.com/jerpelhan/GECO2/

---

## ðŸ’¡ ä¸€å¥è¯è¦ç‚¹

**GECO2ï¼šé€šè¿‡æ¸è¿›å¼æŸ¥è¯¢èšåˆå®žçŽ°å¹¿ä¹‰å°ºåº¦ç›®æ ‡è®¡æ•°**

ðŸŽ¯ **åŒ¹é…é¢†åŸŸ**: **æ”¯æŸ±ä¸€ï¼šæœºå™¨äººæŽ§åˆ¶ (Robot Control)**

**å…³é”®è¯**: `å°‘æ ·æœ¬å­¦ä¹ ` `ç›®æ ‡è®¡æ•°` `å¤šå°ºåº¦ç›®æ ‡æ£€æµ‹` `æ¸è¿›å¼æŸ¥è¯¢èšåˆ` `å¯†é›†é¢„æµ‹`

## ðŸ“‹ æ ¸å¿ƒè¦ç‚¹

1. çŽ°æœ‰å°‘æ ·æœ¬ç›®æ ‡è®¡æ•°æ–¹æ³•åœ¨å¤„ç†å¤šå°ºåº¦ç›®æ ‡å’Œé«˜å¯†åº¦å°ç›®æ ‡æ—¶å­˜åœ¨å›°éš¾ï¼Œä¸»è¦åŽŸå› æ˜¯ä¾èµ–äºŽåˆ†è¾¨çŽ‡èžåˆå’Œå›¾åƒä¸Šé‡‡æ ·ç­‰ä¸´æ—¶æ–¹æ¡ˆã€‚
2. GECO2é€šè¿‡æ¸è¿›å¼èšåˆè·¨å°ºåº¦çš„æ ·æœ¬ç‰¹å¾ä¿¡æ¯ï¼Œç”Ÿæˆé«˜åˆ†è¾¨çŽ‡å¯†é›†æŸ¥è¯¢ï¼Œä»Žè€Œå®žçŽ°å¯¹ä¸åŒå°ºåº¦ç›®æ ‡çš„æœ‰æ•ˆæ£€æµ‹ã€‚
3. å®žéªŒç»“æžœè¡¨æ˜Žï¼ŒGECO2åœ¨è®¡æ•°å’Œæ£€æµ‹ç²¾åº¦ä¸Šå‡ä¼˜äºŽçŽ°æœ‰æŠ€æœ¯ï¼Œä¸”è¿è¡Œé€Ÿåº¦æ›´å¿«ï¼Œå†…å­˜å ç”¨æ›´å°ï¼Œæ€§èƒ½æå‡æ˜¾è‘—ã€‚

## ðŸ“ æ‘˜è¦ï¼ˆä¸­æ–‡ï¼‰

åŸºäºŽå°‘æ ·æœ¬æ£€æµ‹çš„è®¡æ•°å™¨é€šè¿‡å°‘é‡æµ‹è¯•æ ·æœ¬æ¥ä¼°è®¡å›¾åƒä¸­ç›®æ ‡çš„æ•°é‡ã€‚ä¸€ç§å¸¸è§çš„æ–¹æ³•æ˜¯èžåˆä¸åŒåˆ†è¾¨çŽ‡çš„ä¸»å¹²ç‰¹å¾æ¥å®šä½ä¸åŒå¤§å°çš„ç›®æ ‡ã€‚æ­¤å¤–ï¼Œä¸ºäº†åœ¨å¯†é›†åŒºåŸŸä¸­æ£€æµ‹å°ç›®æ ‡ï¼Œé€šå¸¸å¯¹è¾“å…¥å›¾åƒè¿›è¡Œä¸Šé‡‡æ ·å’Œåˆ†å—ï¼Œä»¥åº”å¯¹å¢žåŠ çš„è®¡ç®—å’Œå†…å­˜éœ€æ±‚ã€‚ç”±äºŽè¿™äº›ä¸´æ—¶è§£å†³æ–¹æ¡ˆï¼ŒçŽ°æœ‰çš„è®¡æ•°å™¨åœ¨å¤„ç†åŒ…å«ä¸åŒå¤§å°ç›®æ ‡å’Œå¯†é›†å°ç›®æ ‡åŒºåŸŸçš„å›¾åƒæ—¶è¡¨çŽ°ä¸ä½³ã€‚æˆ‘ä»¬æå‡ºäº†GECO2ï¼Œä¸€ç§ç«¯åˆ°ç«¯çš„å°‘æ ·æœ¬è®¡æ•°å’Œæ£€æµ‹æ–¹æ³•ï¼Œå®ƒæ˜¾å¼åœ°è§£å†³äº†ç›®æ ‡å°ºåº¦é—®é¢˜ã€‚ä¸€ç§æ–°çš„å¯†é›†æŸ¥è¯¢è¡¨ç¤ºé€æ­¥èšåˆè·¨å°ºåº¦çš„ç‰¹å®šäºŽæ ·æœ¬çš„ç‰¹å¾ä¿¡æ¯ï¼Œä»Žè€Œäº§ç”Ÿé«˜åˆ†è¾¨çŽ‡çš„å¯†é›†æŸ¥è¯¢ï¼Œä»Žè€Œèƒ½å¤Ÿæ£€æµ‹å¤§ç›®æ ‡å’Œå°ç›®æ ‡ã€‚GECO2åœ¨è®¡æ•°å’Œæ£€æµ‹ç²¾åº¦ä¸Šéƒ½è¶…è¿‡äº†æœ€å…ˆè¿›çš„å°‘æ ·æœ¬è®¡æ•°å™¨10%ï¼ŒåŒæ—¶è¿è¡Œé€Ÿåº¦å¿«3å€ï¼ŒGPUå†…å­˜å ç”¨æ›´å°ã€‚

## ðŸ”¬ æ–¹æ³•è¯¦è§£

**é—®é¢˜å®šä¹‰**ï¼šçŽ°æœ‰åŸºäºŽå°‘æ ·æœ¬æ£€æµ‹çš„ç›®æ ‡è®¡æ•°æ–¹æ³•ï¼Œåœ¨å¤„ç†åŒ…å«å¤šç§å°ºå¯¸ç›®æ ‡ï¼Œç‰¹åˆ«æ˜¯å°ç›®æ ‡å¯†é›†åˆ†å¸ƒçš„åœºæ™¯æ—¶ï¼Œæ€§èƒ½ä¼šæ˜¾è‘—ä¸‹é™ã€‚è¿™äº›æ–¹æ³•é€šå¸¸ä¾èµ–äºŽç®€å•çš„ç‰¹å¾èžåˆå’Œå›¾åƒä¸Šé‡‡æ ·ç­‰ç­–ç•¥ï¼Œæ— æ³•æœ‰æ•ˆåº”å¯¹ç›®æ ‡å°ºåº¦çš„å¤šæ ·æ€§ï¼Œå¯¼è‡´è®¡æ•°ç²¾åº¦é™ä½Žã€‚

**æ ¸å¿ƒæ€è·¯**ï¼šGECO2çš„æ ¸å¿ƒæ€è·¯æ˜¯åˆ©ç”¨æ¸è¿›å¼çš„æŸ¥è¯¢èšåˆï¼Œæž„å»ºä¸€ç§èƒ½å¤Ÿæœ‰æ•ˆå¤„ç†å¤šå°ºåº¦ç›®æ ‡çš„å¯†é›†æŸ¥è¯¢è¡¨ç¤ºã€‚é€šè¿‡é€æ­¥èžåˆä¸åŒå°ºåº¦çš„ç‰¹å¾ä¿¡æ¯ï¼Œæ¨¡åž‹èƒ½å¤Ÿæ›´å¥½åœ°ç†è§£ç›®æ ‡åœ¨ä¸åŒå°ºåº¦ä¸‹çš„ç‰¹å¾è¡¨è¾¾ï¼Œä»Žè€Œæé«˜æ£€æµ‹å’Œè®¡æ•°çš„å‡†ç¡®æ€§ã€‚

**æŠ€æœ¯æ¡†æž¶**ï¼šGECO2é‡‡ç”¨ç«¯åˆ°ç«¯çš„è®­ç»ƒæ–¹å¼ï¼Œä¸»è¦åŒ…å«ä»¥ä¸‹å‡ ä¸ªæ¨¡å—ï¼š1) ç‰¹å¾æå–ç½‘ç»œï¼ˆBackboneï¼‰ï¼šç”¨äºŽæå–è¾“å…¥å›¾åƒçš„å¤šå°ºåº¦ç‰¹å¾ï¼›2) æ ·æœ¬ç‰¹å¾ç¼–ç å™¨ï¼šç”¨äºŽç¼–ç å°‘æ ·æœ¬ç¤ºä¾‹çš„ç›®æ ‡ç‰¹å¾ï¼›3) æ¸è¿›å¼æŸ¥è¯¢èšåˆæ¨¡å—ï¼šå°†æ ·æœ¬ç‰¹å¾ä¿¡æ¯é€æ­¥èšåˆåˆ°ä¸åŒå°ºåº¦çš„ç‰¹å¾å›¾ä¸Šï¼Œç”Ÿæˆé«˜åˆ†è¾¨çŽ‡çš„å¯†é›†æŸ¥è¯¢ï¼›4) æ£€æµ‹å¤´ï¼šåŸºäºŽå¯†é›†æŸ¥è¯¢è¿›è¡Œç›®æ ‡æ£€æµ‹å’Œè®¡æ•°ã€‚

**å…³é”®åˆ›æ–°**ï¼šGECO2çš„å…³é”®åˆ›æ–°åœ¨äºŽå…¶æ¸è¿›å¼æŸ¥è¯¢èšåˆæ¨¡å—ã€‚è¯¥æ¨¡å—èƒ½å¤Ÿæœ‰æ•ˆåœ°èžåˆä¸åŒå°ºåº¦çš„ç‰¹å¾ä¿¡æ¯ï¼Œç”Ÿæˆå…·æœ‰ä¸°å¯Œä¸Šä¸‹æ–‡ä¿¡æ¯çš„é«˜åˆ†è¾¨çŽ‡å¯†é›†æŸ¥è¯¢ï¼Œä»Žè€Œæ˜¾è‘—æå‡äº†å¯¹å¤šå°ºåº¦ç›®æ ‡çš„æ£€æµ‹èƒ½åŠ›ã€‚ä¸ŽçŽ°æœ‰æ–¹æ³•ä¸­ç®€å•çš„ç‰¹å¾èžåˆç›¸æ¯”ï¼ŒGECO2çš„æ¸è¿›å¼èšåˆæ–¹å¼èƒ½å¤Ÿæ›´å¥½åœ°ä¿ç•™å’Œåˆ©ç”¨ä¸åŒå°ºåº¦çš„ç‰¹å¾ä¿¡æ¯ã€‚

**å…³é”®è®¾è®¡**ï¼šGECO2çš„å…·ä½“å®žçŽ°ç»†èŠ‚åŒ…æ‹¬ï¼š1) ä½¿ç”¨ResNetç­‰æ·±åº¦å·ç§¯ç¥žç»ç½‘ç»œä½œä¸ºç‰¹å¾æå–ç½‘ç»œï¼›2) é‡‡ç”¨Transformerç­‰æ³¨æ„åŠ›æœºåˆ¶æ¥ç¼–ç æ ·æœ¬ç‰¹å¾ï¼›3) è®¾è®¡äº†ä¸€ç§å¤šå±‚çº§çš„èšåˆç»“æž„ï¼Œé€æ­¥å°†æ ·æœ¬ç‰¹å¾ä¿¡æ¯èžåˆåˆ°ä¸åŒå°ºåº¦çš„ç‰¹å¾å›¾ä¸Šï¼›4) ä½¿ç”¨æ ‡å‡†çš„æ£€æµ‹æŸå¤±å‡½æ•°ï¼ˆå¦‚Focal Lossï¼‰è¿›è¡Œè®­ç»ƒã€‚

## ðŸ“Š å®žéªŒäº®ç‚¹

GECO2åœ¨å°‘æ ·æœ¬ç›®æ ‡è®¡æ•°ä»»åŠ¡ä¸Šå–å¾—äº†æ˜¾è‘—çš„æ€§èƒ½æå‡ã€‚å®žéªŒç»“æžœè¡¨æ˜Žï¼ŒGECO2åœ¨è®¡æ•°å’Œæ£€æµ‹ç²¾åº¦ä¸Šå‡è¶…è¿‡äº†å½“å‰æœ€å…ˆè¿›çš„æ–¹æ³•10%ï¼ŒåŒæ—¶è¿è¡Œé€Ÿåº¦æå‡äº†3å€ï¼Œå¹¶ä¸”å‡å°‘äº†GPUå†…å­˜å ç”¨ã€‚è¿™äº›ç»“æžœå……åˆ†è¯æ˜Žäº†GECO2åœ¨å¤„ç†å¤šå°ºåº¦ç›®æ ‡è®¡æ•°é—®é¢˜ä¸Šçš„æœ‰æ•ˆæ€§å’Œä¼˜è¶Šæ€§ã€‚

## ðŸŽ¯ åº”ç”¨åœºæ™¯

GECO2åœ¨å¤šä¸ªé¢†åŸŸå…·æœ‰å¹¿æ³›çš„åº”ç”¨å‰æ™¯ï¼Œä¾‹å¦‚ï¼šæ™ºèƒ½å®‰é˜²ï¼ˆäººç¾¤è®¡æ•°ã€è½¦è¾†è®¡æ•°ï¼‰ã€é¥æ„Ÿå›¾åƒåˆ†æžï¼ˆå»ºç­‘ç‰©è®¡æ•°ã€æ¤è¢«è®¡æ•°ï¼‰ã€åŒ»å­¦å›¾åƒåˆ†æžï¼ˆç»†èƒžè®¡æ•°ã€è‚¿ç˜¤æ£€æµ‹ï¼‰ç­‰ã€‚è¯¥æ–¹æ³•èƒ½å¤Ÿæœ‰æ•ˆå¤„ç†å¤æ‚åœºæ™¯ä¸‹çš„ç›®æ ‡è®¡æ•°é—®é¢˜ï¼Œå…·æœ‰é‡è¦çš„å®žé™…åº”ç”¨ä»·å€¼ï¼Œå¹¶æœ‰æœ›æŽ¨åŠ¨ç›¸å…³é¢†åŸŸçš„å‘å±•ã€‚

## ðŸ“„ æ‘˜è¦ï¼ˆåŽŸæ–‡ï¼‰

> Few-shot detection-based counters estimate the number of instances in the image specified only by a few test-time exemplars. A common approach to localize objects across multiple sizes is to merge backbone features of different resolutions. Furthermore, to enable small object detection in densely populated regions, the input image is commonly upsampled and tiling is applied to cope with the increased computational and memory requirements. Because of these ad-hoc solutions, existing counters struggle with images containing diverse-sized objects and densely populated regions of small objects. We propose GECO2, an end-to-end few-shot counting and detection method that explicitly addresses the object scale issues. A new dense query representation gradually aggregates exemplar-specific feature information across scales that leads to high-resolution dense queries that enable detection of large as well as small objects. GECO2 surpasses state-of-the-art few-shot counters in counting as well as detection accuracy by 10% while running 3x times faster at smaller GPU memory footprint.

