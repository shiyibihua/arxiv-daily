---
layout: default
title: From Demonstrations to Safe Deployment: Path-Consistent Safety Filtering for Diffusion Policies
---

# From Demonstrations to Safe Deployment: Path-Consistent Safety Filtering for Diffusion Policies

**arXiv**: [2511.06385v1](https://arxiv.org/abs/2511.06385) | [PDF](https://arxiv.org/pdf/2511.06385.pdf)

**ä½œè€…**: Ralf RÃ¶mer, Julian Balletshofer, Jakob Thumm, Marco Pavone, Angela P. Schoellig, Matthias Althoff

**åˆ†ç±»**: cs.RO, eess.SY

**å‘å¸ƒæ—¥æœŸ**: 2025-11-09

**å¤‡æ³¨**: Project page: https://tum-lsy.github.io/pacs/. 8 pages, 4 figures

**ðŸ”— ä»£ç /é¡¹ç›®**: [PROJECT_PAGE](https://tum-lsy.github.io/pacs/)

---

## ðŸ’¡ ä¸€å¥è¯è¦ç‚¹

**æå‡ºè·¯å¾„ä¸€è‡´æ€§å®‰å…¨è¿‡æ»¤(PACS)æ–¹æ³•ï¼Œä¿éšœDiffusionç­–ç•¥åœ¨äººæœºäº¤äº’ä¸­çš„å®‰å…¨éƒ¨ç½²ã€‚**

ðŸŽ¯ **åŒ¹é…é¢†åŸŸ**: **æ”¯æŸ±ä¸€ï¼šæœºå™¨äººæŽ§åˆ¶ (Robot Control)**

**å…³é”®è¯**: `Diffusionç­–ç•¥` `å®‰å…¨è¿‡æ»¤` `è·¯å¾„ä¸€è‡´æ€§` `äººæœºäº¤äº’` `å¯è¾¾æ€§åˆ†æž`

## ðŸ“‹ æ ¸å¿ƒè¦ç‚¹

1. Diffusionç­–ç•¥åœ¨å¤æ‚ä»»åŠ¡ä¸­è¡¨çŽ°å‡ºè‰²ï¼Œä½†ç¼ºä¹å®‰å…¨æ€§ä¿éšœï¼Œç›´æŽ¥éƒ¨ç½²é£Žé™©é«˜ã€‚
2. PACSé€šè¿‡è·¯å¾„ä¸€è‡´æ€§åˆ¶åŠ¨ï¼Œç¡®ä¿ç­–ç•¥æ‰§è¡Œä¸Žè®­ç»ƒåˆ†å¸ƒä¸€è‡´ï¼Œç»´æŒä»»åŠ¡å®Œæˆèƒ½åŠ›ã€‚
3. å®žéªŒè¡¨æ˜Žï¼ŒPACSåœ¨åŠ¨æ€çŽ¯å¢ƒä¸­æä¾›å®‰å…¨ä¿è¯ï¼Œå¹¶æ˜¾è‘—ä¼˜äºŽä¼ ç»Ÿå®‰å…¨æ–¹æ³•ã€‚

## ðŸ“ æ‘˜è¦ï¼ˆä¸­æ–‡ï¼‰

Diffusionç­–ç•¥(DPs)é€šè¿‡å­¦ä¹ å¤§è§„æ¨¡æ¼”ç¤ºæ•°æ®é›†ï¼Œåœ¨å¤æ‚æ“ä½œä»»åŠ¡ä¸Šå®žçŽ°äº†æœ€å…ˆè¿›çš„æ€§èƒ½ï¼Œè¿™äº›æ•°æ®é›†é€šå¸¸è·¨è¶Šå¤šä¸ªå®žä½“å’ŒçŽ¯å¢ƒã€‚ç„¶è€Œï¼Œå®ƒä»¬æ— æ³•ä¿è¯å®‰å…¨è¡Œä¸ºï¼Œå› æ­¤éœ€è¦å¤–éƒ¨å®‰å…¨æœºåˆ¶ã€‚ç„¶è€Œï¼Œè¿™äº›æœºåˆ¶ä»¥è®­ç»ƒæœŸé—´æœªè§è¿‡çš„æ–¹å¼æ”¹å˜åŠ¨ä½œï¼Œå¯¼è‡´ä¸å¯é¢„æµ‹çš„è¡Œä¸ºå’Œæ€§èƒ½ä¸‹é™ã€‚ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜ï¼Œæˆ‘ä»¬ä¸ºDPsæå‡ºäº†ä¸€ç§è·¯å¾„ä¸€è‡´æ€§å®‰å…¨è¿‡æ»¤(PACS)ã€‚æˆ‘ä»¬çš„æ–¹æ³•å¯¹ä»Žç”Ÿæˆçš„åŠ¨ä½œåºåˆ—è®¡ç®—å‡ºçš„è½¨è¿¹æ‰§è¡Œè·¯å¾„ä¸€è‡´çš„åˆ¶åŠ¨ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæˆ‘ä»¬ä¿æŒæ‰§è¡Œä¸Žç­–ç•¥çš„è®­ç»ƒåˆ†å¸ƒä¸€è‡´ï¼Œä»Žè€Œä¿æŒå­¦ä¹ åˆ°çš„ã€å®Œæˆä»»åŠ¡çš„è¡Œä¸ºã€‚ä¸ºäº†å®žçŽ°å®žæ—¶éƒ¨ç½²å¹¶å¤„ç†ä¸ç¡®å®šæ€§ï¼Œæˆ‘ä»¬ä½¿ç”¨åŸºäºŽé›†åˆçš„å¯è¾¾æ€§åˆ†æžæ¥éªŒè¯å®‰å…¨æ€§ã€‚æˆ‘ä»¬åœ¨æ¨¡æ‹Ÿå’Œä¸‰ä¸ªå…·æœ‰æŒ‘æˆ˜æ€§çš„çœŸå®žä¸–ç•Œäººæœºäº¤äº’ä»»åŠ¡ä¸­çš„å®žéªŒè¯„ä¼°è¡¨æ˜Žï¼ŒPACS (a)åœ¨åŠ¨æ€çŽ¯å¢ƒä¸­æä¾›å½¢å¼å®‰å…¨ä¿è¯ï¼Œ(b)ä¿æŒä»»åŠ¡æˆåŠŸçŽ‡ï¼Œä»¥åŠ(c)åœ¨ä»»åŠ¡æˆåŠŸçŽ‡æ–¹é¢ä¼˜äºŽååº”å¼å®‰å…¨æ–¹æ³•ï¼Œå¦‚æŽ§åˆ¶éšœç¢å‡½æ•°ï¼Œé«˜è¾¾68%ã€‚

## ðŸ”¬ æ–¹æ³•è¯¦è§£

**é—®é¢˜å®šä¹‰**ï¼šDiffusionç­–ç•¥åœ¨å¤æ‚æ“ä½œä»»åŠ¡ä¸­è¡¨çŽ°å‡ºè‰²ï¼Œä½†å…¶ç”Ÿæˆçš„åŠ¨ä½œåºåˆ—æ— æ³•ä¿è¯å®‰å…¨æ€§ï¼Œç›´æŽ¥éƒ¨ç½²å¯èƒ½å¯¼è‡´å±é™©è¡Œä¸ºã€‚çŽ°æœ‰çš„å®‰å…¨æœºåˆ¶ï¼Œå¦‚æŽ§åˆ¶éšœç¢å‡½æ•°ï¼Œé€šå¸¸ä»¥ååº”å¼çš„æ–¹å¼ä¿®æ”¹åŠ¨ä½œï¼Œè¿™ä¼šæ”¹å˜ç­–ç•¥çš„æ‰§è¡Œè½¨è¿¹ï¼Œä½¿å…¶åç¦»è®­ç»ƒåˆ†å¸ƒï¼Œå¯¼è‡´æ€§èƒ½ä¸‹é™å’Œè¡Œä¸ºä¸å¯é¢„æµ‹ã€‚å› æ­¤ï¼Œå¦‚ä½•åœ¨ä¿è¯å®‰å…¨æ€§çš„åŒæ—¶ï¼Œç»´æŒDiffusionç­–ç•¥çš„æ€§èƒ½å’Œè¡Œä¸ºä¸€è‡´æ€§æ˜¯ä¸€ä¸ªå…³é”®é—®é¢˜ã€‚

**æ ¸å¿ƒæ€è·¯**ï¼šè®ºæ–‡çš„æ ¸å¿ƒæ€è·¯æ˜¯æå‡ºè·¯å¾„ä¸€è‡´æ€§å®‰å…¨è¿‡æ»¤ï¼ˆPACSï¼‰ã€‚PACSä¸æ˜¯ç›´æŽ¥ä¿®æ”¹ç­–ç•¥ç”Ÿæˆçš„åŠ¨ä½œï¼Œè€Œæ˜¯å¯¹æ•´ä¸ªè½¨è¿¹è¿›è¡Œåˆ†æžï¼Œå¹¶åœ¨å¿…è¦æ—¶è¿›è¡Œâ€œåˆ¶åŠ¨â€ï¼Œå³å‡é€Ÿæˆ–åœæ­¢ï¼Œä»¥ç¡®ä¿è½¨è¿¹ä¿æŒåœ¨å®‰å…¨èŒƒå›´å†…ã€‚è¿™ç§æ–¹æ³•ä¿æŒäº†ç­–ç•¥çš„åŽŸå§‹è¡Œä¸ºæ¨¡å¼ï¼Œé¿å…äº†å› åŠ¨ä½œçªå˜è€Œå¯¼è‡´çš„æ€§èƒ½ä¸‹é™ã€‚æ ¸å¿ƒåœ¨äºŽä¿è¯ä¿®æ”¹åŽçš„è½¨è¿¹ä»ç„¶â€œçœ‹èµ·æ¥åƒâ€ç­–ç•¥åœ¨è®­ç»ƒæ—¶å¯èƒ½äº§ç”Ÿçš„è½¨è¿¹ã€‚

**æŠ€æœ¯æ¡†æž¶**ï¼šPACSçš„æ•´ä½“æ¡†æž¶åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªä¸»è¦é˜¶æ®µï¼š1) Diffusionç­–ç•¥ç”Ÿæˆåˆå§‹åŠ¨ä½œåºåˆ—ï¼›2) åŸºäºŽåŠ¨ä½œåºåˆ—è®¡ç®—é¢„æµ‹è½¨è¿¹ï¼›3) ä½¿ç”¨åŸºäºŽé›†åˆçš„å¯è¾¾æ€§åˆ†æžéªŒè¯è½¨è¿¹çš„å®‰å…¨æ€§ï¼Œè€ƒè™‘çŽ¯å¢ƒåŠ¨æ€æ€§å’Œä¸ç¡®å®šæ€§ï¼›4) å¦‚æžœè½¨è¿¹ä¸å®‰å…¨ï¼Œåˆ™è¿›è¡Œè·¯å¾„ä¸€è‡´æ€§åˆ¶åŠ¨ï¼Œè°ƒæ•´åŠ¨ä½œåºåˆ—ï¼Œä½¿å…¶æ»¡è¶³å®‰å…¨çº¦æŸï¼›5) æ‰§è¡Œè°ƒæ•´åŽçš„å®‰å…¨åŠ¨ä½œåºåˆ—ã€‚

**å…³é”®åˆ›æ–°**ï¼šæœ€é‡è¦çš„æŠ€æœ¯åˆ›æ–°ç‚¹åœ¨äºŽè·¯å¾„ä¸€è‡´æ€§åˆ¶åŠ¨ã€‚ä¼ ç»Ÿçš„å®‰å…¨è¿‡æ»¤æ–¹æ³•é€šå¸¸æ˜¯ååº”å¼çš„ï¼Œå³åœ¨æ¯ä¸ªæ—¶é—´æ­¥ç‹¬ç«‹åœ°ä¿®æ”¹åŠ¨ä½œã€‚è€ŒPACSåˆ™è€ƒè™‘äº†æ•´ä¸ªè½¨è¿¹çš„å®‰å…¨æ€§ï¼Œé€šè¿‡è°ƒæ•´åŠ¨ä½œåºåˆ—ï¼Œç¡®ä¿ä¿®æ”¹åŽçš„è½¨è¿¹ä»ç„¶ä¸ŽåŽŸå§‹è½¨è¿¹â€œç›¸ä¼¼â€ï¼Œä»Žè€Œä¿æŒäº†ç­–ç•¥çš„è¡Œä¸ºä¸€è‡´æ€§ã€‚è¿™ç§æ–¹æ³•é¿å…äº†å› åŠ¨ä½œçªå˜è€Œå¯¼è‡´çš„æ€§èƒ½ä¸‹é™ï¼Œå¹¶æé«˜äº†å®‰å…¨è¿‡æ»¤çš„æ•ˆçŽ‡ã€‚

**å…³é”®è®¾è®¡**ï¼šPACSçš„å…³é”®è®¾è®¡åŒ…æ‹¬ï¼š1) ä½¿ç”¨åŸºäºŽé›†åˆçš„å¯è¾¾æ€§åˆ†æžæ¥éªŒè¯è½¨è¿¹çš„å®‰å…¨æ€§ï¼Œè¿™ç§æ–¹æ³•å¯ä»¥å¤„ç†çŽ¯å¢ƒåŠ¨æ€æ€§å’Œä¸ç¡®å®šæ€§ï¼›2) è®¾è®¡äº†ä¸€ç§è·¯å¾„ä¸€è‡´æ€§åˆ¶åŠ¨ç®—æ³•ï¼Œè¯¥ç®—æ³•é€šè¿‡æœ€å°åŒ–ä¿®æ”¹åŽçš„è½¨è¿¹ä¸ŽåŽŸå§‹è½¨è¿¹ä¹‹é—´çš„å·®å¼‚æ¥è°ƒæ•´åŠ¨ä½œåºåˆ—ï¼›3) é‡‡ç”¨äº†ä¸€ç§é«˜æ•ˆçš„æ•°å€¼ä¼˜åŒ–æ–¹æ³•æ¥å®žçŽ°å®žæ—¶éƒ¨ç½²ã€‚

## ðŸ“Š å®žéªŒäº®ç‚¹

å®žéªŒç»“æžœè¡¨æ˜Žï¼ŒPACSåœ¨æ¨¡æ‹Ÿå’ŒçœŸå®žä¸–ç•Œçš„äººæœºäº¤äº’ä»»åŠ¡ä¸­å‡è¡¨çŽ°å‡ºè‰²ã€‚åœ¨ä»»åŠ¡æˆåŠŸçŽ‡æ–¹é¢ï¼ŒPACSæ¯”ä¼ ç»Ÿçš„æŽ§åˆ¶éšœç¢å‡½æ•°æ–¹æ³•æé«˜äº†é«˜è¾¾68%ã€‚æ­¤å¤–ï¼ŒPACSèƒ½å¤Ÿæä¾›å½¢å¼åŒ–çš„å®‰å…¨ä¿è¯ï¼Œç¡®ä¿æœºå™¨äººåœ¨åŠ¨æ€çŽ¯å¢ƒä¸­å®‰å…¨è¿è¡Œã€‚å®žéªŒè§†é¢‘å¯åœ¨é¡¹ç›®ç½‘ç«™æŸ¥çœ‹ã€‚

## ðŸŽ¯ åº”ç”¨åœºæ™¯

è¯¥ç ”ç©¶æˆæžœå¯å¹¿æ³›åº”ç”¨äºŽäººæœºåä½œã€è‡ªåŠ¨é©¾é©¶ã€æœºå™¨äººæ“ä½œç­‰é¢†åŸŸã€‚é€šè¿‡ç¡®ä¿AIç³»ç»Ÿåœ¨å¤æ‚çŽ¯å¢ƒä¸­çš„å®‰å…¨è¿è¡Œï¼Œå¯ä»¥æé«˜ç”Ÿäº§æ•ˆçŽ‡ï¼Œé™ä½Žå®‰å…¨é£Žé™©ï¼Œå¹¶ä¿ƒè¿›äººä¸ŽAIç³»ç»Ÿçš„å’Œè°å…±å¤„ã€‚å°¤å…¶åœ¨åŒ»ç–—ã€åˆ¶é€ ç­‰é«˜é£Žé™©è¡Œä¸šï¼Œè¯¥æŠ€æœ¯å…·æœ‰é‡è¦çš„åº”ç”¨ä»·å€¼ã€‚

## ðŸ“„ æ‘˜è¦ï¼ˆåŽŸæ–‡ï¼‰

> Diffusion policies (DPs) achieve state-of-the-art performance on complex manipulation tasks by learning from large-scale demonstration datasets, often spanning multiple embodiments and environments. However, they cannot guarantee safe behavior, so external safety mechanisms are needed. These, however, alter actions in ways unseen during training, causing unpredictable behavior and performance degradation. To address these problems, we propose path-consistent safety filtering (PACS) for DPs. Our approach performs path-consistent braking on a trajectory computed from the sequence of generated actions. In this way, we keep execution consistent with the policy's training distribution, maintaining the learned, task-completing behavior. To enable a real-time deployment and handle uncertainties, we verify safety using set-based reachability analysis. Our experimental evaluation in simulation and on three challenging real-world human-robot interaction tasks shows that PACS (a) provides formal safety guarantees in dynamic environments, (b) preserves task success rates, and (c) outperforms reactive safety approaches, such as control barrier functions, by up to 68% in terms of task success. Videos are available at our project website: https://tum-lsy.github.io/pacs/.

